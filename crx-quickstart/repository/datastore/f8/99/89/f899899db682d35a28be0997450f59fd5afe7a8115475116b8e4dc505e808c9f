/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.pkg("s7sdk.share");a.Util.require("s7sdk.common.Button");a.Util.require("s7sdk.event.Event");a.Util.require("s7sdk.common.IS");a.Util.require("s7sdk.common.ScrollBar");if(!a.share.getObjPos){a.share.getObjPos=function(f){var c=0;var g=0;var e=0;var d=0;while(f!=null){e=a.Util.getStyle(f,"border-left-width");d=a.Util.getStyle(f,"border-top-width");if(a.Util.isNumber(e)&&(e!="")){c+=parseInt(e)}if(a.Util.isNumber(d)&&(d!="")){g+=parseInt(d)}c+=f.offsetLeft;g+=f.offsetTop;c-=f.scrollLeft;g-=f.scrollTop;f=f.offsetParent}return{x:c,y:g}};a.share.buttonsDefaultCSS=function(g,f,i,k,j){var d=a.Util.css.createCssRuleText;var e=a.Util.css.createCssImgUrlText;var k=(typeof k==="string")?k:"";var h="";if(i){h+=i[0]?d(f+"[state='up']",{"background-image":e(i[0])}):"";h+=i[1]?d(f+"[state='over']",{"background-image":e(i[1])}):"";h+=i[2]?d(f+"[state='down']",{"background-image":e(i[2])}):"";h+=i[3]?d(f+"[state='disabled']",{"background-image":e(i[3])}):""}h+=k;var c=d(f,{"width":"28px","height":"28px","background-size":"contain","background-repeat":"no-repeat","background-position":"center","-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"})+h;if(j){return c}else{a.Util.css.addDefaultCSS(c,g)}};a.share.dialogsDefaultCSS=function(k,j,g,p){var d=a.Util.css.createCssRuleText;var e=a.Util.css.createCssImgUrlText;var o=a.browser&&a.browser.name=="ie"&&a.browser.version.major>=10;var p=(typeof p==="string")?p:"";var l="";if(g&&g.length!=0){for(var h=0;h<g.length;h++){var f=g[h];var m=f.skins;if(!m){return}l+=m[0]?d(j+" ."+f.cssNm+"[state='up']",{"background-image":e(m[0])}):"";l+=m[1]?d(j+" ."+f.cssNm+"[state='over']",{"background-image":e(m[1])}):"";l+=m[2]?d(j+" ."+f.cssNm+"[state='down']",{"background-image":e(m[2])}):"";l+=m[3]?d(j+" ."+f.cssNm+"[state='disabled']",{"background-image":e(m[3])}):""}}l+=p;var n=d(j+" .s7closebutton",{"position":"absolute","top":"2px","right":"2px","padding":"8px","width":"20px","height":"20px"})+d(j+" .s7closebutton[state='up']",{"background-image":e("close_up.png")})+d(j+" .s7closebutton[state='over']",{"background-image":e("close_over.png")})+d(j+" .s7closebutton[state='down']",{"background-image":e("close_down.png")})+d(j+" .s7closebutton[state='disabled']",{"background-image":e("close_disabled.png")});var c=d(j,{"position":"absolute","font-family":"Helvetica","z-index":"6000","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","touch-action":o?"none":""})+d(j+" input::-ms-clear",{"display":"none"})+d(j+" .s7backoverlay",{"position":"absolute !important","width":"100% !important","height":"100% !important","opacity":"0.7","background-color":"#222222"})+d(j+" .s7dialog *",{"box-sizing":"content-box","-moz-box-sizing":"content-box"})+d(j+" .s7dialog",{"color":"#000000","border-radius":"8px","position":"absolute","background-color":"#dddddd"})+d(j+" .s7dialogheader",{"padding":"10px","position":"relative"})+d(j+" .s7dialoglabel",{"color":"#666666","font-weight":"bold","font-size":"9pt"})+d(j+" .s7dialogheadericon",{"position":"relative","vertical-align":"middle","display":"inline-block"})+d(j+" .s7dialogheadertext",{"vertical-align":"middle","padding-left":"16px","font-size":"16pt","position":"relative","font-weight":"bold"})+d(j+" .s7dialogviewarea",{"background-color":"#ffffff","margin":"10px","overflow":"hidden","position":"relative"})+d(j+" .s7dialogbody",{"padding":"10px","position":"relative","display":"inline-block"})+d(j+" .s7dialogfooter",{"border-top":"1px solid #909090","width":"100%","position":"relative"})+d(j+" .s7dialogbuttoncontainer",{"padding-top":"10px","padding-bottom":"6px","float":"right","position":"relative"})+d(j+" .s7dialogfooter .s7button",{"cursor":"default","margin-right":"10px","position":"relative","display":"inline-block","color":"#ffffff","font-size":"9pt","font-weight":"bold","text-align":"center","vertical-align":"middle","box-shadow":"1px 1px 1px #999999","line-height":"34px"})+d(j+" .s7dialogline",{"position":"relative","display":"inline-block"})+d(j+" .s7dialogheader .s7dialogline",{"padding":"10px 10px 2px"})+d(j+" .s7dialogscrollpanel",{"position":"relative","vertical-align":"top","width":"44px","height":"100%","display":"inline-block"})+d(j+" .s7dialoglinefeed",{"display":"block"});c+=n;c+=l;a.Util.css.addDefaultCSS(c,k)};a.share.getDialogSymbols=function(c){var e={};for(var d in c.symbols){if(d!="TOOLTIP"){e[d]=c.getLocalizedText(d)}}return e};a.share.comboBoxDDDefaultCSS=function(c){var f=a.Util.css.createCssRuleText;var e=a.Util.css.createCssImgUrlText;var d=f(c+" .s7comboboxdropdown",{"border-top":"1px solid #cccccc","width":"100%","display":"block"})+f(c+" .s7dropdownitem",{"display":"block","width":"100%","position":"relative"})+f(c+" .s7checkmark",{"width":"25px","height":"25px","vertical-align":"middle","display":"inline-block","background-image":e("cboxchecked.png")})+f(c+" .s7dropdownitemanchor",{"display":"block","width":"100%","background-color":"#ffffff","position":"relative"})+f(c+" .s7dropdownitemanchor[state='selected']",{"background-color":"#eeeeee"})+f(c+" .s7dropdownitemanchor[state='unselected']",{"background-color":"#ffffff"})+f(c+" .s7dropdownitemanchor:hover",{"background-color":"#eeeeee"});return d};a.share.comboBoxDefaultCSS=function(c){var g=a.Util.css.createCssRuleText;var f=a.Util.css.createCssImgUrlText;var e=a.share.buttonsDefaultCSS("",c+" .s7combobox .s7comboboxbutton",["cboxbtndn_up.png","cboxbtndn_over.png","cboxbtndn_over.png","cboxbtndn_up.png"],null,true);var d=g(c+" .s7combobox",{"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","border":"1px solid #cccccc","display":"block","padding-left":"10px","position":"relative","width":"300px","-webkit-tap-highlight-color":"rgba(0,0,0,0)"})+g(c+" .s7combobox[expanded='false']",{"width":"110px"})+g(c+" .s7combobox[expanded='true']",{"width":"300px"})+g(c+" .s7combobox .s7comboboxtext",{"position":"relative","display":"inline-block","height":"40px"})+g(c+" .s7combobox .s7comboboxbutton",{"position":"absolute","display":"block","top":"0px","right":"0px","width":"40px","height":"40px"})+g(c+" .s7combobox .s7comboboxdropdown",{"border-top":"1px solid #cccccc","width":"100%","display":"block"})+g(c+" .s7combobox .s7dropdownitem",{"display":"block","width":"100%","position":"relative"})+g(c+" .s7combobox .s7checkmark",{"width":"25px","height":"25px","vertical-align":"middle","display":"inline-block","background-image":f("cboxchecked.png")})+g(c+" .s7combobox .s7dropdownitemanchor",{"display":"block","width":"100%","background-color":"#ffffff","position":"relative"})+g(c+" .s7combobox .s7dropdownitemanchor[state='selected']",{"background-color":"#eeeeee"})+g(c+" .s7combobox .s7dropdownitemanchor[state='unselected']",{"background-color":"#ffffff"})+g(c+" .s7combobox .s7dropdownitemanchor:hover",{"background-color":"#eeeeee"});d=e+d;return d}}if(!a.share.DlgActionButton){a.share.DlgActionButton=function DlgActionButton(e,i,h,g,d,c,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.DlgActionButton constructor - containerId: %0, settings: %1 , compId: %2",e,i,h);if(g){this.symbols=g}arguments.callee.superclass.superclass.call(this,h,e,c?c:"span",null,i);this.w=0;this.h=0;this.hint="";this.css=d;this.currentState=0;this.activated=true;this.init();if(f&&f.length>0){this.setText(f)}this.makeToolTip();this.changeState(this.currentState);this.obj.setAttribute("tabindex",0)};a.Class.inherits("s7sdk.share.DlgActionButton","s7sdk.common.Button");a.share.DlgActionButton.prototype.setText=function(c){this.obj.textContent=c;this.obj.innerText=c};a.share.DlgActionButton.prototype.symbols={TOOLTIP:""}}if(!a.share.EmailShareControl){a.share.EmailShareControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.EmailShareControl.NS,c.constructor,a.share.EmailShare.RESTRICTED_STYLES]);var d=this;this.component.emaildialog.addEventListener(a.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(g){var f=g.s7event.data;d.dispatchEvent(new a.event.ControlComponentEvent(a.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:d.component.emaildialog.getObj().id,classname:f.classname,property:f.property,value:f.value},false))},false)};a.share.EmailShareControl.prototype.setCSS=function(g,f,e){if(this.component){function d(h){return h.replace(/\./g,"")}var c=d(g);if(c==this.component.cl||c.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[g,f,e])}else{c=c.split(" ");if(c[0]==this.component.emaildialog.component.cl){this.component.emaildialog.setCSS(g,f,e)}}}};a.share.EmailShareControl.prototype.rebuild=function(d){if(this.component){var e=this.component.emaildialog;var c=this.component.getParameters();this.superproto.rebuild.apply(this,[d]);this.component.emaildialog=e;this.component.setParameters(c)}};a.share.EmailShareControl.NS="s7sdk.share.EmailShareControl"}a.Class.inherits(a.share.EmailShareControl.NS,"s7sdk.ControlComponent");if(!a.share.EmailShare){a.share.EmailShare=function EmailShare(j,d,k){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.EmailShare constructor - containerId: %0, settings: %1 , compId: %2",j,d,k);var c=document.getElementById(j);if(c&&(c.s7base instanceof a.share.SocialShare)){j=c.s7base.getPanelId()}k=(typeof k=="string"&&k.length)?k:"EmailShare_"+a.Util.createUniqueId();var f=!!arguments[3];arguments.callee.superclass.apply(this,[k,j,null,0,0,"s7emailshare",d,parent,!f]);this.cl="s7emailshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var g=this;var h=false;this.ontouchHandler=function(l){h=true};a.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(l){if(!(a.browser.supportsTouch())||(l instanceof MouseEvent)||h||g.inKey){if(c&&(c.s7base instanceof a.share.SocialShare)){c.s7base.onSocialClick()}g.btnClick()}h=false};a.Event.addDOMListener(this,"click",this.onclickHandler,false);this.serverUrl=a.Util.normalizeUrl(this.serverUrl);var e=/(^http[s]?:\/\/[^\/]+)?([^\\?#]*)/.exec(this.serverUrl);e=e==null?"":e[1];var i=/(^http[s]?:\/\/[^\/]+)?([^\\?#]*)/.exec(this.emailurl);i=i==null?"":i[1];if(e!=""&&i!=""&&i!=e){this.emailurl=this.serverUrl+"../../"+this.modifiers.emailurl.defaults[0]}else{if(e!=""&&i==""){this.emailurl=this.serverUrl+"../../"+this.modifiers.emailurl.defaults[0]}else{if(e==""&&i!=""){this.emailurl=this.modifiers.emailurl.defaults[0]}}}if(!f){this.emaildialog=new a.share.EmailDialog(this.id,this.settings,this.id+"_dialog",a.share.getDialogSymbols(this),this);return new a.share.EmailShareControl(this)}else{return this}};a.Class.inherits("s7sdk.share.EmailShare","s7sdk.common.Button");a.share.EmailShare.prototype.modifiers={emailurl:{params:["emailurl"],defaults:["/s7/emailFriend"]},serverUrl:{params:["isRootPath"],defaults:["/is/image/"]}};a.share.EmailShare.prototype.symbols={TOOLTIP:"Email",HEADER:"Email Link",TOOLTIP_HEADER_CLOSE:"Close",INVALID_ADDRESSS:"Wrong email address",TO_EMAIL_ERROR:"To email address is required or it may be invalid",FROM_EMAIL_ERROR:"From email address is required or it may be invalid",TO:"To",TOOLTIP_ADD:"Add",ADD:"Add Another Email Address",PRIMARY_EMAIL_ADDRESS:"Primary Email Address",ADDITIONAL_EMAIL_ADDRESS:"Additional Email Address",FROM:"From",MESSAGE:"Message",TOOLTIP_REMOVE:"Remove",REMOVE:"Remove the email address",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",CLOSE:"Close",TOOLTIP_CLOSE:"Close",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"Send Email",TOOLTIP_ACTION:"Send",SEND_SUCCESS:"Email sent successfully",SEND_FAILURE:"Send email failed"};a.share.EmailShare.RESTRICTED_STYLES={"s7emailshare":["width","height"]};a.share.EmailShare.prototype.btnClick=function(){this.emaildialog.setEmailService(this.emailurl);this.emaildialog.setServerUrl(this.serverUrl);this.emaildialog.setContentUrl(this.contentUrl?this.contentUrl:"");this.emaildialog.setContentTitle(this.titleStr?this.titleStr:"");this.emaildialog.setOriginUrl(this.originURL?this.originURL:"");this.emaildialog.setThumbnail(this.thumbnail);this.emaildialog.setDescription(this.descrStr?this.descrStr:"");this.emaildialog.show();var c=new a.event.SocialEvent(a.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(c);this.obj.setAttribute("tabindex",-1)};a.share.EmailShare.prototype.getParameters=function(){var c=this.emaildialog.getDialogData();c.contentUrl=this.contentUrl?this.contentUrl:"";c.titleStr=this.titleStr?this.titleStr:"";c.originURL=this.originURL?this.originURL:"";c.thumbnail=this.thumbnail;c.descrStr=this.descrStr?this.descrStr:"";return c};a.share.EmailShare.prototype.setParameters=function(c){this.contentUrl=c.contentUrl;this.titleStr=c.titleStr;this.originURL=c.originURL;this.thumbnail=c.thumbnail;this.descrStr=c.descrStr;this.emaildialog.setDialogData(c)};a.share.EmailShare.prototype.setContentUrl=function(c){this.contentUrl=c};a.share.EmailShare.prototype.setOriginUrl=function(c){this.originURL=c};a.share.EmailShare.prototype.setContentTitle=function(c){this.titleStr=c};a.share.EmailShare.prototype.setThumbnail=function(c){this.thumbnail=c};a.share.EmailShare.prototype.addEventListener=function(e,d,c){a.Base.prototype.addEventListener.apply(this,[e,d,c])};a.share.EmailShare.prototype.setDescription=function(c){this.descrStr=c};a.share.EmailShare.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (EmailShare) is unsupported! Please refer to SDK documentation on using setModifier.")};a.share.EmailShare.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(a.share.EmailShare.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[e,d,c])}};a.share.EmailShare.prototype.cleanUp=function(){a.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.emaildialog){this.emaildialog.dispose()}this.superproto.cleanUp.apply(this)};a.share.EmailShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function b(){a.share.buttonsDefaultCSS("EmailShare",".s7emailshare",["emailbtn_up.png","emailbtn_over.png","emailbtn_over.png","emailbtn_up.png"])})()}if(!a.share.EmbedShareControl){a.share.EmbedShareControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.EmbedShareControl.NS,c.constructor,a.share.EmbedShare.RESTRICTED_STYLES]);var d=this;this.component.embeddialog.addEventListener(a.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(g){var f=g.s7event.data;d.dispatchEvent(new a.event.ControlComponentEvent(a.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:d.component.embeddialog.getObj().id,classname:f.classname,property:f.property,value:f.value},false))},false)};a.share.EmbedShareControl.NS="s7sdk.share.EmbedShareControl";a.share.EmbedShareControl.prototype.setCSS=function(g,f,e){if(this.component){function d(h){return h.replace(/\./g,"")}var c=d(g);if(c==this.component.cl||c.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[g,f,e])}else{c=c.split(" ");if(c[0]==this.component.embeddialog.component.cl){this.component.embeddialog.setCSS(g,f,e)}}}};a.share.EmbedShareControl.prototype.rebuild=function(e){if(this.component){var c=this.component.embeddialog;var d=this.component.getParameters();this.superproto.rebuild.apply(this,[e]);this.component.embeddialog=c;this.component.setParameters(d)}}}a.Class.inherits(a.share.EmbedShareControl.NS,"s7sdk.ControlComponent");if(!a.share.EmbedShare){a.share.EmbedShare=function EmbedShare(d,g,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.EmbedShare constructor - containerId: %0, settings: %1 , compId: %2",d,g,f);var c=document.getElementById(d);if(c&&(c.s7base instanceof a.share.SocialShare)){d=c.s7base.getPanelId()}f=(typeof f=="string"&&f.length)?f:"EmbedShare_"+a.Util.createUniqueId();var i=!!arguments[3];arguments.callee.superclass.apply(this,[f,d,null,0,0,"s7embedshare",g,parent,!i]);this.cl="s7embedshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var h=this;var e=false;this.ontouchHandler=function(j){e=true};a.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(j){if(!(a.browser.supportsTouch())||(j instanceof MouseEvent)||e||h.inKey){if(c&&(c.s7base instanceof a.share.SocialShare)){c.s7base.onSocialClick()}h.btnClick()}e=false};a.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!i){this.embeddialog=new a.share.EmbedDialog(this.id,this.settings,this.id+"_dialog",this.embedsizes,a.share.getDialogSymbols(this),this);return new a.share.EmbedShareControl(this)}else{return this}};a.share.EmbedShare.prototype.cleanUp=function(){a.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.embeddialog){this.embeddialog.dispose()}this.superproto.cleanUp.apply(this)};a.share.EmbedShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};a.Class.inherits("s7sdk.share.EmbedShare","s7sdk.common.Button");a.share.EmbedShare.prototype.symbols={CUSTOM_SIZE_WIDTH:"width",CUSTOM_SIZE_HEIGHT:"height",TOOLTIP:"Embed",HEADER:"Get Embed Code",TOOLTIP_HEADER_CLOSE:"Close",DESCRIPTION:"To get embed code, copy and paste: ",EMBED_SIZE:"Embed Size",CUSTOM_SIZE:"Custom Size",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down"};a.share.EmbedShare.DEFAULT_EMBED_SIZES="320,240;640,480,true;1280,960";a.share.EmbedShare.prototype.modifiers={embedsizes:{params:["embedsizes"],defaults:[a.share.EmbedShare.DEFAULT_EMBED_SIZES],parseParams:false}};a.share.EmbedShare.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(a.share.EmbedShare.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[e,d,c])}};a.share.EmbedShare.RESTRICTED_STYLES={"s7embedshare":["width","height"]};a.share.EmbedShare.prototype.getParameters=function(){var c=this.embeddialog.getDialogData();c.template=this.template;return c};a.share.EmbedShare.prototype.setParameters=function(c){this.template=c.template;c.embedsizes=this.embedsizes;c.template=c.template;this.embeddialog.setDialogData(c)};a.share.EmbedShare.prototype.btnClick=function(){this.embeddialog.setEmbedCode(this.template);this.embeddialog.show();var c=new a.event.SocialEvent(a.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(c);this.obj.setAttribute("tabindex",-1)};a.share.EmbedShare.prototype.addEventListener=function(e,d,c){a.Base.prototype.addEventListener.apply(this,[e,d,c])};a.share.EmbedShare.prototype.setEmbedCode=function(c){this.template=c};a.share.EmbedShare.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (EmbedShare) is unsupported! Please refer to SDK documentation on using setModifier.")};(function b(){a.share.buttonsDefaultCSS("EmbedShare",".s7embedshare",["embedbtn_up.png","embedbtn_over.png","embedbtn_over.png","embedbtn_up.png"])})()}if(!a.share.LinkShareControl){a.share.LinkShareControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.LinkShareControl.NS,c.constructor,a.share.LinkShare.RESTRICTED_STYLES]);var d=this;this.component.linkdialog.addEventListener(a.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(g){var f=g.s7event.data;d.dispatchEvent(new a.event.ControlComponentEvent(a.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:d.component.linkdialog.getObj().id,classname:f.classname,property:f.property,value:f.value},false))},false)};a.share.LinkShareControl.NS="s7sdk.share.LinkShareControl";a.share.LinkShareControl.prototype.setCSS=function(g,f,e){if(this.component){function d(h){return h.replace(/\./g,"")}var c=d(g);if(c==this.component.cl||c.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[g,f,e])}else{c=c.split(" ");if(c[0]==this.component.linkdialog.component.cl){this.component.linkdialog.setCSS(g,f,e)}}}};a.share.LinkShareControl.prototype.rebuild=function(e){if(this.component){var c=this.component.linkdialog;var d=this.component.getContentUrl();this.superproto.rebuild.apply(this,[e]);this.component.linkdialog=c;this.component.setContentUrl(d)}}}a.Class.inherits(a.share.LinkShareControl.NS,"s7sdk.ControlComponent");if(!a.share.LinkShare){a.share.LinkShare=function LinkShare(d,g,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.LinkShare constructor - containerId: %0, settings: %1 , compId: %2",d,g,f);var c=document.getElementById(d);if(c&&(c.s7base instanceof a.share.SocialShare)){d=c.s7base.getPanelId()}f=(typeof f=="string"&&f.length)?f:"LinkShare_"+a.Util.createUniqueId();var i=!!arguments[3];arguments.callee.superclass.apply(this,[f,d,null,0,0,"s7linkshare",g,parent,!i]);this.cl="s7linkshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var h=this;var e=false;this.ontouchHandler=function(j){e=true};a.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(j){if(!(a.browser.supportsTouch())||(j instanceof MouseEvent)||e||h.inKey){if(c&&(c.s7base instanceof a.share.SocialShare)){c.s7base.onSocialClick()}h.btnClick()}e=false};a.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!i){this.linkdialog=new a.share.LinkDialog(this.id,this.settings,this.id+"_dialog",a.share.getDialogSymbols(this),this);return new a.share.LinkShareControl(this)}else{return this}};a.share.LinkShare.prototype.getContentUrl=function(){return this.sharedurl};a.share.LinkShare.prototype.cleanUp=function(){a.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.linkdialog){this.linkdialog.dispose()}this.superproto.cleanUp.apply(this)};a.share.LinkShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};a.Class.inherits("s7sdk.share.LinkShare","s7sdk.common.Button");a.share.LinkShare.prototype.symbols={LINK_URL:"Link URL",TOOLTIP:"Link",HEADER:"Share Link",TOOLTIP_HEADER_CLOSE:"Close",DESCRIPTION:"To share this link, copy and paste:",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};a.share.LinkShare.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(a.share.LinkShare.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[e,d,c])}};a.share.LinkShare.RESTRICTED_STYLES={"s7linkshare":["width","height"]};a.share.LinkShare.prototype.btnClick=function(){this.linkdialog.setContentUrl(this.sharedurl?this.sharedurl:location.href);this.linkdialog.show();var c=new a.event.SocialEvent(a.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(c);this.obj.setAttribute("tabindex",-1)};a.share.LinkShare.prototype.addEventListener=function(e,d,c){a.Base.prototype.addEventListener.apply(this,[e,d,c])};a.share.LinkShare.prototype.setContentUrl=function(c){this.sharedurl=c};(function b(){a.share.buttonsDefaultCSS("LinkShare",".s7linkshare",["linkbtn_up.png","linkbtn_over.png","linkbtn_over.png","linkbtn_up.png"])})()}if(!a.share.FacebookShareControl){a.share.FacebookShareControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.FacebookShareControl.NS,c.constructor,a.share.FacebookShare.RESTRICTED_STYLES])};a.share.FacebookShareControl.NS="s7sdk.share.FacebookShareControl"}a.Class.inherits(a.share.FacebookShareControl.NS,"s7sdk.ControlComponent");if(!a.share.FacebookShare){a.share.FacebookShare=function FacebookShare(d,g,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.FacebookShare constructor - containerId: %0, settings: %1 , compId: %2",d,g,f);var c=document.getElementById(d);if(c&&(c.s7base instanceof a.share.SocialShare)){d=c.s7base.getPanelId()}var i=!!arguments[3];arguments.callee.superclass.apply(this,[f,d,null,0,0,"s7facebookshare",g,!i]);this.cl="s7facebookshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");this.url="";var h=this;var e=false;this.ontouchHandler=function(j){e=true};a.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(j){if(!(a.browser.supportsTouch())||(j instanceof MouseEvent)||e||h.inKey){if(c&&(c.s7base instanceof a.share.SocialShare)){c.s7base.onSocialClick()}h.btnClick()}e=false};a.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!i){return new a.share.FacebookShareControl(this)}else{return this}};a.Class.inherits("s7sdk.share.FacebookShare","s7sdk.common.Button");a.share.FacebookShare.prototype.symbols={TOOLTIP:"Facebook"};a.share.FacebookShare.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(a.share.FacebookShare.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[e,d,c])}};a.share.FacebookShare.RESTRICTED_STYLES={"s7facebookshare":["width","height"]};a.share.FacebookShare.prototype.setContentUrl=function(c){this.url=c};a.share.FacebookShare.prototype.btnClick=function(){var c;if(a.Util.isNonEmptyString(this.url)){c=encodeURIComponent(this.url)}else{c=encodeURIComponent(document.location.href)}window.open("https://www.facebook.com/sharer/sharer.php?u="+c,"facebooksharedialog",a.share.FacebookShare.createSizeString(400,500));var d=new a.event.SocialEvent(a.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(d);this.obj.setAttribute("tabindex",-1)};a.share.FacebookShare.createSizeString=function(d,c){var f,e;if(screen.height<c){c=screen.height;e=0}else{e=Math.round((screen.height-c)/2)}if(screen.width<d){f=0;d=screen.width}else{f=Math.round((screen.width-d)/2)}return"width="+d+",height="+c+",left="+f+",top="+e};a.share.FacebookShare.prototype.addEventListener=function(e,d,c){a.Base.prototype.addEventListener.apply(this,[e,d,c])};a.share.FacebookShare.prototype.cleanUp=function(){a.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);this.superproto.cleanUp.apply(this)};a.share.FacebookShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function b(){a.share.buttonsDefaultCSS("FacebookShare",".s7facebookshare",["facebookbtn_up.png","facebookbtn_over.png","facebookbtn_over.png","facebookbtn_up.png"])})()}if(!a.share.TwitterShareControl){a.share.TwitterShareControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.TwitterShareControl.NS,c.constructor,a.share.TwitterShare.RESTRICTED_STYLES])};a.share.TwitterShareControl.NS="s7sdk.share.TwitterShareControl"}a.Class.inherits(a.share.TwitterShareControl.NS,"s7sdk.ControlComponent");if(!a.share.TwitterShare){a.share.TwitterShare=function TwitterShare(d,g,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.TwitterShare constructor - containerId: %0, settings: %1 , compId: %2",d,g,f);var c=document.getElementById(d);if(c&&(c.s7base instanceof a.share.SocialShare)){d=c.s7base.getPanelId()}this.message=null;this.url=null;var i=!!arguments[3];arguments.callee.superclass.apply(this,[f,d,null,0,0,"s7twittershare",g,!i]);this.cl="s7twittershare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var h=this;var e=false;this.ontouchHandler=function(j){e=true};a.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(j){if(!(a.browser.supportsTouch())||(j instanceof MouseEvent)||e||h.inKey){if(c&&(c.s7base instanceof a.share.SocialShare)){c.s7base.onSocialClick()}h.btnClick()}e=false};a.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!i){return new a.share.TwitterShareControl(this)}else{return this}};a.Class.inherits("s7sdk.share.TwitterShare","s7sdk.common.Button");a.share.TwitterShare.prototype.symbols={TOOLTIP:"Twitter"};a.share.TwitterShare.RESTRICTED_STYLES={"s7twittershare":["width","height"]};a.share.TwitterShare.prototype.setMessage=function(c){this.message=c};a.share.TwitterShare.prototype.setContentUrl=function(c){this.url=c};a.share.TwitterShare.prototype.btnClick=function(){var c="";if(a.Util.isNonEmptyString(this.url)){c+="?url=";c+=encodeURIComponent(this.url)}else{c+="?url="+encodeURIComponent(document.location.href)}if(a.Util.isNonEmptyString(this.message)){c+=c.length>0?"&":"?";c+="text=";c+=this.message}window.open("https://twitter.com/share"+c,"twittersharedialog",a.share.FacebookShare.createSizeString(626,436));var d=new a.event.SocialEvent(a.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(d);this.obj.setAttribute("tabindex",-1)};a.share.TwitterShare.prototype.addEventListener=function(e,d,c){a.Base.prototype.addEventListener.apply(this,[e,d,c])};a.share.TwitterShare.prototype.cleanUp=function(){a.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);this.superproto.cleanUp.apply(this)};a.share.TwitterShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};a.share.TwitterShare.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(a.share.TwitterShare.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[e,d,c])}};(function b(){a.share.buttonsDefaultCSS("TwitterShare",".s7twittershare",["twitterbtn_up.png","twitterbtn_over.png","twitterbtn_over.png","twitterbtn_up.png"])})()}if(!a.share.SocialShareControl){a.share.SocialShareControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.SocialShareControl.NS,c.constructor,a.share.SocialShare.RESTRICTED_STYLES])};a.share.SocialShareControl.NS="s7sdk.share.SocialShareControl";a.share.SocialShareControl.prototype.rebuild=function(f){if(this.component){var e=this.component.socCntrSp.childNodes;var c=[];if(e&&(e.length!=0)){for(var d=0;d<e.length;d++){c.push(e[d])}}this.superproto.rebuild.apply(this,[f]);if(c.length!=0){for(var d=0;d<c.length;d++){this.component.socCntrSp.appendChild(c[d])}}}};a.share.SocialShareControl.prototype.getSocialBtn=function(){return this.component.socialbtn}}a.Class.inherits(a.share.SocialShareControl.NS,"s7sdk.ControlComponent");if(!a.share.SocialShare){a.share.SocialShare=function SocialShare(c,e,d){var f=!!arguments[3];d=(typeof d=="string"&&d.length)?d:"SocShare_"+a.Util.createUniqueId();a.Logger.log(a.Logger.CONFIG,"s7sdk.share.SocialShare constructor - container: %0, settings: %1 , compId: %2",c,e,d);arguments.callee.superclass.apply(this,[d,c,"div","s7socialshare",e,!f]);this.isTouch=a.browser.device.name!="desktop";this.stepSize=50;this.duration=300;this.delaytohide=2000;this.waitToHide=-1;this.state=0;this.lastMouse={x:-1000000,y:-1000000};this.container=this.getParent();this.trackedComponents=[];this.wid=parseInt(a.Util.css.getCss("s7socialshare","width",d,null,this.container));this.hei=parseInt(a.Util.css.getCss("s7socialshare","height",d,null,this.container));this.createComponent();if(!f){return new a.share.SocialShareControl(this)}else{return this}};a.Class.inherits("s7sdk.share.SocialShare","s7sdk.UIComponent");a.share.SocialShare.prototype.modifiers={bearing:{params:["bearing"],defaults:["left"],ranges:[["up","left","right","down","fit-vertical","fit-lateral"]]}};a.share.SocialShare.prototype.symbols={TOOLTIP:"Social Share"};a.share.SocialShare.RESTRICTED_STYLES={"s7socialshare":["width","height"],"s7socialshare s7socialbutton":["width","height"]};a.share.SocialShare.prototype.createComponent=function(){this.createElement();this.attachToContainer();this.socialbtn=new a.share.DlgActionButton(this.id,this.settings,this.id+"_socBtn",{TOOLTIP:this.getLocalizedText("TOOLTIP")},"s7socialbutton","div");this.socialbtn.obj.style.position="absolute";var f=parseInt(a.Util.css.getCss("s7socialbutton","width",this.socialbtn.obj.id,null,this.obj));var c=parseInt(a.Util.css.getCss("s7socialbutton","height",this.socialbtn.obj.id,null,this.obj));if((f!=0)&&(f!=28)&&(c!=0)&&(c!=28)){this.wid=f;this.hei=c}this.getTopContainer();var d=this;this.animate=setInterval(function(){d.enterFrame()},this.stepSize);this.socialbtn.addEventListener("click",function(g){d.onSocialClick()},false);this.socCntr=document.createElement("div");this.socCntr.style.overflow="hidden";this.socCntr.style.position="absolute";this.socCntr.style.top="0px";this.socCntr.style.left="0px";a.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.fontSize="0px";this.socCntr.style.letterSpacing="0px";this.socCntr.style.wordSpacing="0px";this.obj.appendChild(this.socCntr);this.socCntrSp=document.createElement("div");this.socCntrSp.id=this.id+"_socCtnr";this.socCntrSp.className="s7socialsharepanel";this.socCntrSp.style.position="relative";this.socCntrSp.style.display="inline-block";this.socCntrSp.setAttribute("role","menu");this.socCntrSp.setAttribute("aria-orientation","vertical");switch(this.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":this.socCntrSp.setAttribute("aria-orientation","horizontal");break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":this.socCntrSp.setAttribute("aria-orientation","vertical");break}this.socCntr.appendChild(this.socCntrSp);this.resize(this.wid,this.hei);this.numFocused=-1;if(this.isTouch){return}this.mouseoverHandler=function(g){d.isOver=true;d.onSocialOver()};a.Event.addDOMListener(this.socialbtn,"mouseover",this.mouseoverHandler);this.mouseoutHandler=function(g){d.isOver=false;d.onSocialOut()};a.Event.addDOMListener(this.socialbtn,"mouseout",this.mouseoutHandler);this.touchstartHandler=function(g){d.isOver=true;d.onSocialOver()};a.Event.addDOMListener(this.socialbtn,"touchstart",this.touchstartHandler,{passive:false});this.touchendHandler=function(g){d.isOver=false;d.onSocialOut()};a.Event.addDOMListener(this.socialbtn,"touchend",this.touchendHandler,{passive:false});this.winMouseMoveHandler=function(g){d.lastMouse={x:a.Util.getEventPos(g).x,y:a.Util.getEventPos(g).y}};this.winMouseOutHandler=function(g){d.lastMouse={x:-1000000,y:-1000000}};var e=window;a.Event.addDOMListener(e,"mouseout",this.winMouseOutHandler,true);a.Event.addDOMListener(e,"mousemove",this.winMouseMoveHandler,true);this.socialbtn.obj.setAttribute("aria-haspopup","true");this.socialbtn.obj.setAttribute("aria-controls",this.socCntrSp.id);this.socialbtn.addEventListener("focus",function(g){d.socialbtnInFocus=true},false);this.socialbtn.addEventListener("blur",function(g){d.socialbtnInFocus=false},false);a.Event.addDOMListener(this,"keydown",function(j){var g=Array.prototype.slice.call(d.socCntrSp.childNodes);for(var h=g.length-1;h>=0;h--){if(g[h].offsetParent===null){g.splice(h,1)}}d.isOver=true;if(g&&g.length>0){if(d.isOver&&d.socialbtnInFocus){if(j.keyCode==a.Enum.KEY_CODE.ENTER||j.keyCode==a.Enum.KEY_CODE.SPACE||j.keyCode==a.Enum.KEY_CODE.LEFT||j.keyCode==a.Enum.KEY_CODE.RIGHT||j.keyCode==a.Enum.KEY_CODE.DOWN||j.keyCode==a.Enum.KEY_CODE.UP){a.Event.preventDefault(j);d.onSocialOver();d.isOver=true;d.numFocused=0;g[d.numFocused].focus()}return}if(j.keyCode==a.Enum.KEY_CODE.TAB&&d.isOver){d.hide();d.waitToHide=-1;d.isOver=false;return}if(j.keyCode==a.Enum.KEY_CODE.ESCAPE){a.Event.preventDefault(j);d.socialbtn.focus();d.hide();d.waitToHide=-1;d.isOver=false;return}switch(d.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":if((j.keyCode==a.Enum.KEY_CODE.LEFT)){a.Event.preventDefault(j);if(d.numFocused>0){d.numFocused=d.numFocused-1;g[d.numFocused].focus()}}if((j.keyCode==a.Enum.KEY_CODE.RIGHT)){a.Event.preventDefault(j);if(d.numFocused<g.length-1&&d.numFocused!=-1){d.numFocused=d.numFocused+1;g[d.numFocused].focus()}}break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":if((j.keyCode==a.Enum.KEY_CODE.UP)){a.Event.preventDefault(j);if(d.numFocused>0){d.numFocused=d.numFocused-1;g[d.numFocused].focus()}}if((j.keyCode==a.Enum.KEY_CODE.DOWN)){a.Event.preventDefault(j);if(d.numFocused<g.length-1&&d.numFocused!=-1){d.numFocused=d.numFocused+1;g[d.numFocused].focus()}}break}}},{passive:false})};a.share.SocialShare.prototype.getSize=function(){return{width:this.wid,height:this.hei}};a.share.SocialShare.prototype.getPanelId=function(){return this.socCntrSp.id};a.share.SocialShare.prototype.onSocialOut=function(){this.waitToHide=this.delaytohide};a.share.SocialShare.prototype.onSocialOver=function(){this.show()};a.share.SocialShare.prototype.checkMouse=function(){var e=a.Util.getObjPos(this.socCntr);var d=this.lastMouse.x-e.x;var c=this.lastMouse.y-e.y;return(d>0&&d<this.socCntr.offsetWidth&&c>0&&c<this.socCntr.offsetHeight)};a.share.SocialShare.prototype.onSocialClick=function(){this.focus();if(!(this.state==0||this.state==3)){return}if(!this.isOver){this.show()}else{this.hide()}this.isOver=!this.isOver;this.waitToHide=-1};a.share.SocialShare.prototype.initAnimate=function(){this.step=0;this.shiftSize=this.socCntrSp.offsetHeight;this.stepDuration=Math.ceil(this.shiftSize/(this.duration/this.stepSize));a.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","start")};a.share.SocialShare.prototype.getTopContainer=function(){var e=document.body;var c=this.obj;while(c!=null){c=c.parentNode;if(c!=null){if(typeof(c.s7base)=="object"&&a.common&&a.common.Container&&(c.s7base instanceof a.common.Container)){e=c;break}if(c==document.body){break}var d=a.Util.getStyle(c,"overflow");if(d=="hidden"){e=c;break}}}this.anchorObj=e};a.share.SocialShare.prototype.getTrackedComponents=function(){return this.trackedComponents};a.share.SocialShare.prototype.addTrackedComponent=function(c){this.trackedComponents.push(c)};a.share.SocialShare.prototype.removeTrackedComponent=function(c){for(var d=this.trackedComponents.length;d--;){if(this.trackedComponents[d]===c){this.trackedComponents.splice(d,1)}}};a.share.SocialShare.prototype.getAnchorDimension=function(){var d;var c;this.dim=new a.Rectangle(0,0,0,0);if(this.anchorObj==document.body){if(typeof window.innerWidth!="undefined"){this.dim.width=window.innerWidth;this.dim.height=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){this.dim.width=document.documentElement.clientWidth;this.dim.height=document.documentElement.clientHeight}else{this.dim.width=document.getElementsByTagName("body")[0].clientWidth;this.dim.height=document.getElementsByTagName("body")[0].clientHeight}}}else{this.dim.width=this.anchorObj.clientWidth;this.dim.height=this.anchorObj.clientHeight;var e=a.share.getObjPos(this.anchorObj);this.dim.x=e.x;this.dim.y=e.y}};a.share.SocialShare.prototype.checkRoll=function(c,H){switch(this.bearing){case"up":return"U";case"left":return"L";case"right":return"R";case"down":return"D"}var m=true;var G=true;var n=true;var g=true;var l=true;var z=true;var d=true;var f=true;var I=true;var q=true;var B=true;var v=true;var C=true;var s=c.x,r=c.y,u=c.offsetWidth,E=c.offsetHeight,F=H.x,j=H.y,t=H.offsetWidth,p=H.offsetHeight;if(c.x-H.offsetHeight<this.dim.x){m=false}if(c.x+c.offsetWidth-H.offsetHeight<this.dim.x){G=false;n=false}else{if(c.y-H.offsetWidth<this.dim.y){G=false}if(c.y+c.offsetHeight+H.offsetWidth>this.dim.y+this.dim.height){n=false}}if(c.x+c.offsetWidth+H.offsetHeight>this.dim.x+this.dim.width){g=false}if(c.x+H.offsetHeight>this.dim.x+this.dim.width){l=false;z=false}else{if(c.y-H.offsetWidth<this.dim.y){l=false}if(c.y+c.offsetHeight+H.offsetWidth>this.dim.y+this.dim.height){z=false}}if(c.y-H.offsetHeight<this.dim.y){d=false}if(c.y+c.offsetHeight-H.offsetHeight<this.dim.y){f=false;I=false}else{if(c.x-H.offsetWidth<this.dim.x){f=false}if(c.x+c.offsetWidth+H.offsetWidth>this.dim.x+this.dim.width){I=false}}if(c.y+c.offsetHeight+H.offsetHeight>this.dim.y+this.dim.height){q=false}if(c.y+H.offsetHeight>this.dim.y+this.dim.height){B=false;v=false}else{if(c.x-H.offsetWidth<this.dim.x){B=false}if(c.x+c.offsetWidth+H.offsetWidth>this.dim.x+this.dim.width){v=false}}function e(h,i){return !(h.x>i.x+i.width||h.x+h.width<i.x||h.y>i.y+i.height||h.y+h.height_1<i.y)}if(this.trackedComponents.length>0){for(var D=0;D<this.trackedComponents.length;D++){var k=new a.Rectangle(0,0,0,0);var A=this.trackedComponents[D];if(typeof A.getObj=="function"&&A.getObj()){var o=a.share.getObjPos(A.getObj());k.width=A.getObj().clientWidth;k.height=A.getObj().clientHeight;k.x=o.x;k.y=o.y}else{if(A.clientWidth&&A.clientHeight){var o=a.share.getObjPos(A);k.width=A.clientWidth;k.height=A.clientHeight;k.x=o.x;k.y=o.y}}if(!k.isEmpty()){C=!e(k,new a.Rectangle(s,r,u,E));q=q&&!e(k,new a.Rectangle(s,r,u,E+p));d=d&&!e(k,new a.Rectangle(s,r-p,u,E+p));m=m&&!e(k,new a.Rectangle(s-p,r,u+t,E));g=g&&!e(k,new a.Rectangle(s,r,u+p,E));B=B&&C&&!e(k,new a.Rectangle(s-t,r,t,p));v=v&&C&&!e(k,new a.Rectangle(s+u,r,t,p));f=f&&C&&!e(k,new a.Rectangle(s-t,r+E-p,t,p));I=I&&C&&!e(k,new a.Rectangle(s+u,r+E-p,t,p));l=l&&C&&!e(k,new a.Rectangle(s,r-t,p,t));z=z&&C&&!e(k,new a.Rectangle(s,r+E,p,t));G=G&&C&&!e(k,new a.Rectangle(s+u-p,r-t,p,t));n=n&&C&&!e(k,new a.Rectangle(s+u-p,r+E,p,t))}}}if(this.bearing=="fit-vertical"){if(q){return"D"}else{if(z){return"RD"}else{if(n){return"LD"}else{if(d){return"U"}else{if(l){return"RU"}else{if(G){return"LU"}else{if(g){return"R"}else{if(v){return"DR"}else{if(I){return"UR"}else{if(m){return"L"}else{if(B){return"DL"}else{if(f){return"UL"}}}}}}}}}}}}return"D"}else{if(g){return"R"}else{if(v){return"DR"}else{if(I){return"UR"}else{if(m){return"L"}else{if(B){return"DL"}else{if(f){return"UL"}else{if(q){return"D"}else{if(z){return"RD"}else{if(n){return"LD"}else{if(d){return"U"}else{if(l){return"RU"}else{if(G){return"LU"}}}}}}}}}}}}return"R"}};a.share.SocialShare.prototype.show=function(){if(this.state!=0){return}this.socCntr.style.left="0px";this.socCntr.style.top="0px";this.socCntr.style.width="";this.socCntrSp.style.left="0px";this.socCntrSp.style.display="";this.socCntrSp.style.top="0px";this.updateDisplayStyle("");var d=a.share.getObjPos(this.socCntr);d.offsetWidth=this.socCntr.offsetWidth;d.offsetHeight=this.socCntr.offsetHeight;var f=a.share.getObjPos(this.socialbtn.obj);f.offsetWidth=this.socialbtn.obj.offsetWidth;f.offsetHeight=this.socialbtn.obj.offsetHeight;this.shiftPos={"x":f.x-d.x,"y":f.y-d.y};this.getAnchorDimension();this.dir=this.checkRoll(f,d);switch(this.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":this.socCntrSp.setAttribute("aria-orientation","horizontal");break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":this.socCntrSp.setAttribute("aria-orientation","vertical");break}this.initAnimate();this.isShowig=true;var e;this.shiftSize_A=this.shiftSize;switch(this.dir){case"L":this.socCntr.style.left=-this.shiftSize+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntrSp.style.left=this.shiftSize+"px";e=true;break;case"LU":this.socCntr.style.left=-this.shiftSize+f.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=-f.offsetHeight+"px";this.socCntrSp.style.left=this.shiftSize+"px";e=true;break;case"LD":this.socCntr.style.left=-this.shiftSize+f.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=f.offsetHeight+"px";this.socCntrSp.style.left=this.shiftSize+"px";e=true;break;case"R":this.socCntr.style.left=f.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntrSp.style.left=-this.shiftSize+"px";e=true;break;case"RU":this.socCntr.style.left="0px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=-f.offsetHeight+"px";this.socCntrSp.style.left=-this.shiftSize+"px";e=true;break;case"RD":this.socCntr.style.left="0px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=f.offsetHeight+"px";this.socCntrSp.style.left=-this.shiftSize+"px";e=true;break;case"U":this.socCntr.style.left="0px";this.socCntr.style.top=-this.shiftSize+"px";this.socCntrSp.style.top=this.shiftSize+"px";e=false;break;case"UL":this.socCntr.style.left=-f.offsetWidth+"px";this.socCntr.style.top=-this.shiftSize+f.offsetHeight+"px";this.socCntrSp.style.top=this.shiftSize+"px";e=false;break;case"UR":this.socCntr.style.left=f.offsetWidth+"px";this.socCntr.style.top=-this.shiftSize+f.offsetHeight+"px";this.socCntrSp.style.top=this.shiftSize+"px";e=false;break;case"D":this.socCntr.style.left="0px";this.socCntr.style.top=f.offsetHeight+"px";this.socCntrSp.style.top=-this.shiftSize+"px";e=false;break;case"DL":this.socCntr.style.left=-f.offsetWidth+"px";this.socCntr.style.top="0px";this.socCntrSp.style.top=-this.shiftSize+"px";e=false;break;case"DR":this.socCntr.style.left=f.offsetWidth+"px";this.socCntr.style.top="0px";this.socCntrSp.style.top=-this.shiftSize+"px";e=false;break}a.Util.setOpacity(this.socCntr,1);this.socCntr.style.pointerEvents="auto";if(e){this.updateDisplayStyle("inline-block")}else{var c=a.Util.css.getCss("s7socialshare","position",this.obj.id,null,this.container);if(c=="relative"||c=="static"){this.updateDisplayStyle("block")}}this.socCntr.style.left=parseInt(this.socCntr.style.left)+this.shiftPos.x+"px";this.socCntr.style.top=parseInt(this.socCntr.style.top)+this.shiftPos.y+"px";this.socCntrSp.setAttribute("aria-hidden","false");this.state=1;this.socialbtn.obj.setAttribute("aria-expanded","true")};a.share.SocialShare.prototype.hide=function(){this.step=0;this.stepDuration=Math.ceil(this.shiftSize_A/(this.duration/this.stepSize));this.isShowig=false;this.socCntr.style.overflow="hidden";this.socialbtn.obj.setAttribute("aria-expanded","false");this.socCntrSp.setAttribute("aria-hidden","true")};a.share.SocialShare.prototype.hidePanel=function(){if(this.state==0){return}this.isOver=false;this.state=2;this.hide()};a.share.SocialShare.prototype.updateDisplayStyle=function(d){var e=this.socCntrSp.childNodes;for(var c=0;c<e.length;c++){if(a.Util.getStyle(e[c],"display")=="none"){continue}if(e[c].style.display!=d){e[c].style.display=d;e[c].style.zoom=1}}};a.share.SocialShare.prototype.enterFrame=function(){switch(this.state){case 0:break;case 1:this.slideStep();break;case 2:this.slideStep();break;case 3:if(!this.isOver){if(!this.isTouch){if(this.checkMouse()){return}}this.waitToHide-=this.stepSize;if(this.waitToHide<0){this.hide();a.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","start");this.state=2}}break}};a.share.SocialShare.prototype.slideStep=function(){var d=new Date().getTime();if(this.step==0){this.sttime=d}var c=(this.isShowig?this.shiftSize_A-this.stepDuration*this.step:this.stepDuration*this.step);c=c<0?0:c;c=c>this.shiftSize_A?this.shiftSize_A:c;switch(this.dir){case"L":case"LU":case"LD":this.socCntrSp.style.left=c+"px";break;case"R":case"RU":case"RD":this.socCntrSp.style.left=-c+"px";break;case"U":case"UL":case"UR":this.socCntrSp.style.top=c+"px";break;case"D":case"DL":case"DR":this.socCntrSp.style.top=-c+"px";break}if((this.stepDuration*this.step>this.shiftSize_A)&&(c==0||c==this.shiftSize_A)){this.step=0;if(this.state==2){this.socCntr.style.width="0px";a.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.left="0px";this.socCntrSp.style.left="0px";this.socCntrSp.style.top="0px";this.socCntr.style.width="auto";this.socCntr.style.overflow="hidden";this.state=0;a.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","")}else{this.socCntr.style.overflow="visible";this.waitToHide=this.delaytohide;this.state=3;a.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","")}}this.step++};a.share.SocialShare.prototype.resize=function(f,d){a.Logger.log(a.Logger.FINE,"SocialShare.resize %0: %1x%2",this.id,f,d);this.socCntr.style.width="0px";a.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.left="0px";this.socCntrSp.style.left="0px";this.socCntrSp.style.top="0px";this.socCntr.style.width="auto";this.socCntr.style.overflow="hidden";this.state=0;this.wid=f;this.hei=d;this.obj.style.width=f+"px";this.obj.style.height=d+"px";this.socialbtn.resize(f,d);var g=this.socCntrSp.childNodes;for(var e=0;e<g.length;e++){var c=g[e];if(c.button){c.button.resize(f,d)}}};a.share.SocialShare.prototype.getWidth=function(){return this.wid};a.share.SocialShare.prototype.getHeight=function(){return this.hei};a.share.SocialShare.prototype.activate=function(){var c=this.socCntrSp.childNodes;if(c&&c.length>0){if(this.numFocused!=-1){}else{this.numFocused=0}}this.enableEvents();this.socialbtn.activate();this.activated=true};a.share.SocialShare.prototype.deactivate=function(){var c=this.socCntrSp.childNodes;if(c){for(var d=0;d<c.length;d++){c[d].setAttribute("tabindex",-1)}}this.disableEvents();this.socialbtn.deactivate();this.activated=false};a.share.SocialShare.prototype.focus=function(){this.socialbtn.focus()};a.share.SocialShare.prototype.blur=function(){this.socialbtn.blur()};a.share.SocialShare.prototype.cleanUp=function(){if(this.animate){clearInterval(this.animate);this.animate=null}var c=window;a.Event.removeDOMListener(c,"mouseout",this.winMouseOutHandler,true);a.Event.removeDOMListener(c,"mousemove",this.winMouseMoveHandler,true);this.winMouseMoveHandler=null;this.winMouseOutHandler=null;a.Util.removeTags(this.obj);this.obj.style.cssText=""};a.share.SocialShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};a.share.SocialShare.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (SocialShare) is unsupported! Please refer to SDK documentation on using setModifier.")};a.share.SocialShare.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(a.share.SocialShare.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superclass.superclass.prototype.setCSS.apply(this,[e,d,c])}};(function b(){var e=a.Util.css.createCssRuleText;var c=e(".s7socialshare",{"-webkit-transform":"translateZ(0px)","width":"28px","height":"28px"})+e(".s7socialshare .s7socialbutton",{"background-color":"#e7e7e7"})+e(".s7socialshare .s7socialsharepanel[state='start']",{"-webkit-transform":"translateZ(0px)"})+e(".s7socialshare .s7socialsharepanel",{"font-size":"0px","letter-spacing":"0px","word-spacing":"0px","background-color":"#e7e7e7"});var d=a.share.buttonsDefaultCSS("",".s7socialshare .s7socialbutton",["socialbtn_up.png","socialbtn_over.png","socialbtn_over.png","socialbtn_up.png"],null,true);c=d+c;a.Util.css.addDefaultCSS(c,"SocialShare")})()}if(!a.share.CustomComboBox){a.share.CustomComboBox=function CustomComboBox(c,g,e,j,i,h,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.CustomComboBox constructor - containerId: %0, settings: %1 , compId: %2",c,g,e);var d=j?j:"div";arguments.callee.superclass.apply(this,[e,c,d,"s7combobox",g]);this.ddContainer=h;this.containertyp=d;this.parenObject=i;this.mainLabelId=" "+f;this.compId=(a.Util.isNull(e)?"":e);if((c!=null)&&(a.Util.byId(c))){this.container=a.Util.byId(c)}else{this.container=document.body}this.createCBox();this.idxSelected=-1;this.isExpanded=false;this.changeState(a.share.CustomComboBox.EXPANDED)};a.Class.inherits("s7sdk.share.CustomComboBox","s7sdk.UIComponent");a.share.CustomComboBox.EXPANDED=0;a.share.CustomComboBox.ShRINKED=1;a.share.CustomComboBox.ITEMSTATE="state";a.share.CustomComboBox.SELECTED="selected";a.share.CustomComboBox.UN_SELECTED="unselected";a.share.CustomComboBox.prototype.symbols={TOOLTIP:"Select"};a.share.CustomComboBox.prototype.createCBox=function(){this.createElement();this.container.appendChild(this.obj);this.obj.setAttribute("tabindex",0);this.obj.setAttribute("role","button");this.obj.setAttribute("aria-expanded","false");this.obj.setAttribute("aria-haspopup","listbox");if(!this.ddContainer){this.ddContainer=this.obj}this.createInput();var c=this;this.obj.addEventListener("focus",function(){c.inFocus=true});this.obj.addEventListener("blur",function(){c.inFocus=false});this.clickHandler=function(d){if(!c.isExpanded){c.onExpand()}else{c.selectByIdx(c.idxSelected);c.hideDropDn()}};this.addEventListener("click",this.clickHandler,false);this.keyDownHandler=function(d){if(c.items&&c.items.length>0){if(c.inFocus){if(d.keyCode==a.Enum.KEY_CODE.TAB){c.hideDropDn();return}a.Event.preventDefault(d);if(d.keyCode==a.Enum.KEY_CODE.ESCAPE&&c.isExpanded){c.hideDropDn();c.obj.focus();a.Event.stopPropagation(d)}if(!c.isExpanded){if(d.keyCode==a.Enum.KEY_CODE.SPACE||d.keyCode==a.Enum.KEY_CODE.ENTER){c.onExpand()}if((d.keyCode==a.Enum.KEY_CODE.UP)){c.onExpand();if(c.idxSelected>0){a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.UN_SELECTED);c.idxSelected=c.idxSelected-1;a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.SELECTED)}}if((d.keyCode==a.Enum.KEY_CODE.DOWN)){c.onExpand();if(c.idxSelected<c.items.length-1&&c.idxSelected!=-1){a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.UN_SELECTED);c.idxSelected=c.idxSelected+1;a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.SELECTED)}}if((d.keyCode==a.Enum.KEY_CODE.HOME)||(d.keyCode==a.Enum.KEY_CODE.PAGE_UP)){if(c.getSelectedIdx()>0){c.selectByIdx(0)}}if((d.keyCode==a.Enum.KEY_CODE.END)||(d.keyCode==a.Enum.KEY_CODE.PAGE_DOWN)){if(c.getSelectedIdx()<c.items.length-1){c.selectByIdx(c.items.length-1)}}}else{if((d.keyCode==a.Enum.KEY_CODE.UP)){if(c.idxSelected>0){a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.UN_SELECTED);c.idxSelected=c.idxSelected-1;a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.SELECTED)}}if((d.keyCode==a.Enum.KEY_CODE.DOWN)){if(c.idxSelected<c.items.length-1&&c.idxSelected!=-1){a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.UN_SELECTED);c.idxSelected=c.idxSelected+1;a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.SELECTED)}}if((d.keyCode==a.Enum.KEY_CODE.HOME)||(d.keyCode==a.Enum.KEY_CODE.PAGE_UP)){if(c.idxSelected>0){a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.UN_SELECTED);c.idxSelected=0;a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.SELECTED)}}if((d.keyCode==a.Enum.KEY_CODE.END)||(d.keyCode==a.Enum.KEY_CODE.PAGE_DOWN)){if(c.idxSelected<c.items.length-1&&c.idxSelected!=-1){a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.UN_SELECTED);c.idxSelected=c.items.length-1;a.Util.css.setCSSAttributeSelector(c.items[c.idxSelected],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.SELECTED)}}if((d.keyCode==a.Enum.KEY_CODE.ENTER)||(d.keyCode==a.Enum.KEY_CODE.SPACE)){c.selectByIdx(c.idxSelected)}c.obj.setAttribute("aria-labelledby",c.items[c.idxSelected].id+c.mainLabelId);c.obj.setAttribute("aria-activedescendant",c.items[c.idxSelected].id)}a.Event.preventDefault(d)}}};a.Event.addDOMListener(this,"keydown",this.keyDownHandler,{passive:false})};a.share.CustomComboBox.prototype.createInput=function(){var c=document.createElement("span");c.className="s7comboboxtext";c.style.width="0px";c.style.verticalAlign="middle";this.obj.appendChild(c);this.obj.txt=document.createTextNode("");this.obj.appendChild(this.obj.txt);this.obj.id=this.id?this.id+"_cbxbutton":"cbxbutton_"+a.Util.createUniqueId();this.cbtn=new a.share.DlgActionButton(this.obj.id,this.settings,null,{TOOLTIP:""},"s7comboboxbutton");this.cbtn.obj.setAttribute("tabindex",-1);var d=this;a.Event.addDOMListener(this.cbtn,"click",function(f){d.lastFocus=document.activeElement;d.cbtn.obj.blur();d.onExpand();a.Event.stopPropagation(f)},false);var e=document.createElement(this.containertyp);e.className="s7comboboxdropdown";e.setAttribute("role","listbox");this.ddContainer.appendChild(e);this.cboxdd=e;this.cboxdd.style.display="none"};a.share.CustomComboBox.prototype.onExpand=function(){this.lastFocus=document.activeElement;if(this.cboxdd.style.display=="none"){if(this.ddContainer.dlgAbsolute){if(this.container.onExpand){this.container.onExpand()}var h=a.share.getObjPos(this.obj);var j=this.ddContainer.dlgAbsolute;j.style.left="0px";j.style.top="0px";var d=a.share.getObjPos(j);j.style.left=(h.x-d.x)+"px";var g=h.y-d.y;var c=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);c=(this.parenObject&&this.parenObject.getContainerHeight)?this.parenObject.getContainerHeight():c;this.cboxdd.style.visibility="hidden";this.cboxdd.style.display="block";if((g+this.obj.offsetHeight+j.offsetHeight+2)<c){g+=(this.obj.offsetHeight+2)}else{g-=(j.offsetHeight+2)}j.style.top=g+"px";j.style.width=this.obj.offsetWidth+"px";this.cboxdd.style.visibility="inherit"}this.cboxdd.style.display="block";for(var e=0;e<this.items.length;e++){a.Util.css.setCSSAttributeSelector(this.items[e],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.UN_SELECTED)}a.Util.css.setCSSAttributeSelector(this.items[this.getSelectedIdx()],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.SELECTED);this.idxSelected=this.getSelectedIdx();this.isExpanded=true;this.obj.setAttribute("aria-expanded","true")}else{this.cboxdd.style.display="none";this.isExpanded=false;this.obj.setAttribute("aria-expanded","false")}this.blockScroll=true;var f=this;setTimeout(function(){f.blockScroll=false},500)};a.share.CustomComboBox.prototype.hideDropDn=function(){this.isExpanded=false;this.obj.setAttribute("aria-expanded","false");this.cboxdd.style.display="none"};a.share.CustomComboBox.prototype.addItem=function(h,c){var g=document.createElement("span");g.className="s7dropdownitem";g.setAttribute("aria-label",h);this.cboxdd.appendChild(g);var e=document.createElement("a");e.className="s7dropdownitemanchor";e.setAttribute("role","option");e.setAttribute("aria-selected",c?"true":"false");g.appendChild(e);var d=document.createElement("span");d.className="s7checkmark";d.style.visibility=c?"inherit":"hidden";e.appendChild(d);e.txtnode=document.createTextNode(h);e.appendChild(e.txtnode);e.checked=d;e.val=h;e.idx=this.items.length;e.id=this.id+"_dropdownitem_"+this.items.length;var f=this;a.Event.addDOMListener(e,"click",function(i){f.onSelect(i)},true);this.items.push(e);if(c){this.setSelectedIdx(e.idx)}};a.share.CustomComboBox.prototype.onSelect=function(d){var c=(d.target||d.srcElement);this.selectByObj(c)};a.share.CustomComboBox.prototype.selectByIdx=function(c){var d=this.cboxdd.childNodes;if(c>=0&&c<d.length){this.selectByObj(d[c].childNodes[0]);a.Util.css.setCSSAttributeSelector(d[c].childNodes[0],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.SELECTED);this.obj.setAttribute("aria-labelledby",d[c].childNodes[0].id+this.mainLabelId)}};a.share.CustomComboBox.prototype.selectByObj=function(c){var e=this.cboxdd.childNodes;for(var d=0;d<e.length;d++){if(e[d].childNodes[0].checked.style.visibility!="hidden"){e[d].childNodes[0].checked.style.visibility="hidden";e[d].childNodes[0].setAttribute("aria-selected","false")}a.Util.css.setCSSAttributeSelector(e[d].childNodes[0],a.share.CustomComboBox.ITEMSTATE,a.share.CustomComboBox.UN_SELECTED)}this.obj.txt.nodeValue=c.val;if(this.parenObject&&this.parenObject.updateTemplate){this.parenObject.updateTemplate(c.val)}c.checked.style.visibility="inherit";c.setAttribute("aria-selected","true");this.obj.setAttribute("aria-labelledby",c.id+this.mainLabelId);this.setSelectedIdx(c.idx);if(this.parenObject&&c.val==this.parenObject.customSizeStr){this.onExpand()}this.hideDropDn()};a.share.CustomComboBox.prototype.changeState=function(c){var d=["true","false"];if(d=="true"){this.isExpanded=true}else{this.isExpanded=false}a.Util.css.setCSSAttributeSelector(this.obj,"expanded",d[c]);this.obj.setAttribute("aria-expanded",d[c])};a.share.CustomComboBox.prototype.update=function(d,e){while(this.cboxdd.lastChild){this.cboxdd.removeChild(this.cboxdd.lastChild)}this.items=[];for(var c=0;c<d.length;c++){if(e==c){this.addItem(d[c],true);this.selected=this.obj.txt.nodeValue=d[c];if(this.parenObject&&this.parenObject.updateTemplate){this.parenObject.updateTemplate(d[c])}}else{this.addItem(d[c],false)}}};a.share.CustomComboBox.prototype.removeItem=function(c){};a.share.CustomComboBox.prototype.getSelectedIdx=function(){return this.selectedIdx};a.share.CustomComboBox.prototype.setSelectedIdx=function(c){if(c>=0&&c<this.items.length){this.selectedIdx=c}return this.selectedIdx};(function b(){var c=a.share.comboBoxDefaultCSS("");a.Util.css.addDefaultCSS(c,"CustomComboBox")})()}if(!a.share.SocialDialog){a.share.SocialDialog=function SocialDialog(c,h,f,e,d,g){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.SocialDialog constructor - containerId: %0, settings: %1 , compId: %2",c,h,f);if(d){this.symbols=d}var i=!!arguments[5];arguments.callee.superclass.apply(this,[f,c,"div",e,h,!i]);this.cl=e;this.compId=(a.Util.isNull(f)?"":f);this.defaultContainerId=this.getAnchorId(document.getElementById(c));this.parent=g;this.focusableElements=[];this.firstFocusableElement=null;this.lastFocusableElement=null};a.Class.inherits("s7sdk.share.SocialDialog","s7sdk.UIComponent");a.share.SocialDialog.prototype.symbols={HEADER:"",TOOLTIP_HEADER_CLOSE:"",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"",TOOLTIP_ACTION:""};a.share.SocialDialog.prototype.getAnchorId=function(d){var c=d;while(c!=null){c=c.parentNode;if(c==document.body){break}if(c!=null&&typeof(c.s7base)=="object"&&a.common&&a.common.Container&&(c.s7base instanceof a.common.Container)){break}}return c==document.body||typeof(c.id)=="undefined"?null:c.id};a.share.SocialDialog.prototype.attachDialog=function(){var g=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement;var i;this.isBody=false;if(g){i=g}else{if((this.defaultContainerId!=null)&&(a.Util.byId(this.defaultContainerId))){i=a.Util.byId(this.defaultContainerId);if(i instanceof a.Container){i=i.firstChild}}else{i=document.body;this.isBody=true}}if(this.container!=i){this.container=i;i.appendChild(this.obj)}if(this.isTouch&&this.contentInt&&!this.scrollingContent){this.scrollingContent=this.contentInt;var d=0;var e=this.scrollingContent;var c=0;var f=this;this.scrollingContentTouchstartHandler=function(k){d=k.touches[0].pageY;c=event.touches.length;if(c>1){a.Event.preventDefault(k);a.Event.stopPropagation(k);return}var j=e.scrollTop;if(j+e.offsetHeight>=e.scrollHeight){e.scrollTop=e.scrollHeight-e.offsetHeight-1}};a.Event.addDOMListener(this.scrollingContent,"touchstart",this.scrollingContentTouchstartHandler,{passive:false});this.touchmoveHandler=function(j){a.Event.preventDefault(j);a.Event.stopPropagation(j)};a.Event.addDOMListener(this.obj,"touchmove",this.touchmoveHandler,{passive:false});this.scrollingContentTouchmoveHandler=function(j){a.Event.stopPropagation(j);if(((d-j.touches[0].pageY)<0)&&(e.scrollTop==0)){a.Event.preventDefault(j)}if(f.contentInt.clientHeight>=f.contentSpan.offsetHeight){a.Event.preventDefault(j)}};a.Event.addDOMListener(this.scrollingContent,"touchmove",this.scrollingContentTouchmoveHandler,{passive:false});this.scrollingContentTouchendHandler=function(j){c=0};a.Event.addDOMListener(this.scrollingContent,"touchend",this.scrollingContentTouchendHandler,{passive:false})}if(this.isTouch){if(this.contentInt){this.contentSpan.focus()}var h=this.getMaxNeighbourZIndex(this.obj)+1;this.obj.style.zIndex=h}};a.share.SocialDialog.prototype.getMaxNeighbourZIndex=function(g){var f=-1;for(var d=0;d<g.parentNode.children.length;d++){var c=g.parentNode.children[d];var e=this.getZIndex(c);if(this.isPositioned(c)&&(e>0)){e=this.getZIndex(c)}else{if(c.children.length>0){e=this.getMaxNeighbourZIndex(c.children[0])}else{e=0}}if(e>f){f=e}}return f};a.share.SocialDialog.prototype.getZIndex=function(d){var c;if(window.getComputedStyle){c=document.defaultView.getComputedStyle(d,null).getPropertyValue("z-index")}else{if(d.currentStyle){c=d.currentStyle.zIndex}}if(c=="auto"){c=0}return parseInt(c)};a.share.SocialDialog.prototype.isPositioned=function(d){var c;if(window.getComputedStyle){c=document.defaultView.getComputedStyle(d,null).getPropertyValue("position")}else{if(d.currentStyle){c=d.currentStyle.position}}return(c=="absolute")||(c=="relative")||(c=="fixed")};a.share.SocialDialog.prototype.createDialog=function(d){this.createElement();this.obj.style.position="absolute";this.obj.style.width="100%";this.obj.style.height="100%";this.top=this.left=0;this.attachDialog();this.backOverlay=document.createElement("div");this.backOverlay.className="s7backoverlay";this.obj.appendChild(this.backOverlay);this.dialog=document.createElement("div");this.dialog.className="s7dialog";this.dialog.setAttribute("tabindex",-1);this.dialog.setAttribute("role","dialog");this.dialog.setAttribute("aria-hidden","true");this.obj.appendChild(this.dialog);var f=a.Util.getStyle(this.dialog,"width");this.dialog.style.width="100%";var e=a.Util.getStyle(this.dialog,"width");this.isTouch=f==e;this.dialog.style.width="";var h=document.createElement("div");h.style.top="0px";h.style.left="0px";h.style.position="absolute";h.style.zIndex=9999;this.dialog.appendChild(h);var c=document.createElement("span");c.style.position="relative";h.appendChild(c);this.cntSpAbsolute=c;this.cntSpAbsolute.dlgAbsolute=h;this.createCaption();this.createContentContainer();this.createContent();this.createBottom(d);this.dialogStyle=this.dialog.style.height;this.contentIntStyle=this.contentInt.style.height;this.setupSz();this.centerDialog();this.setupScroll();this.wid_=parseInt(a.Util.getStyle(this.obj,"width"));this.hei_=parseInt(a.Util.getStyle(this.obj,"height"));this.obj.style.display="none";if(this.isTouch){var g=this;this.onOrientationChange=function(k){if(!g.isTouch){return}g.blockresize=true;g.focusableElements=g.getFocusableElements();for(var j=0;j<g.focusableElements.length;j++){if(g.focusableElements[j]==document.activeElement){g.focusableElements[j].blur();break}}g.blockresize=false;g.hide();g.waitToHide=-1;g.show();g.waitToHide=-1}}};a.share.SocialDialog.prototype.getContainerHeight=function(){return this.backOverlay.offsetHeight};a.share.SocialDialog.prototype.createContentContainer=function(){this.contentInt=document.createElement("div");this.contentInt.setAttribute("id",this.compId+"_viewArea");this.contentInt.className="s7dialogviewarea";this.dialog.appendChild(this.contentInt);this.contentSpan=document.createElement("span");this.contentSpan.className="s7dialogbody";this.contentInt.appendChild(this.contentSpan)};a.share.SocialDialog.prototype.centerDialog=function(c){if(this.isBody){if(this.isTouch){this.dialog.style.left=this.left+(this.obj.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=this.top+(this.obj.offsetHeight-this.dialog.offsetHeight)/2+"px"}else{if(this.obj.offsetWidth!=this.dialog.offsetWidth||c){this.dialog.style.left=this.left+(this.obj.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=this.top+(this.obj.offsetHeight-this.dialog.offsetHeight)/2+"px"}}}else{if(this.isTouch){this.moveToTopLeft(this.dialog)}else{this.dialog.style.left=(this.backOverlay.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=(this.backOverlay.offsetHeight-this.dialog.offsetHeight)/2+"px"}}};a.share.SocialDialog.prototype.moveToTopLeft=function(e){a.Util.css.setCSSAttributeSelector(e,"mode","fullscreen");var d=parseInt(a.Util.getStyle(e,"left"));var h=parseInt(a.Util.getStyle(e,"top"));d=a.Util.isNumber(d)?d:-parseInt(a.Util.getStyle(e,"right"));h=a.Util.isNumber(h)?h:-parseInt(a.Util.getStyle(e,"bottom"));d=a.Util.isNumber(d)?d:0;h=a.Util.isNumber(h)?h:0;var f=e.getBoundingClientRect();var c=f.left-d;var g=f.top-h;e.style.left=-c+"px";e.style.top=-g+"px"};a.share.SocialDialog.prototype.getInitialHeight=function(){return parseInt(a.Util.css.getCss("s7dialogviewarea","height",this.contentInt.id,null,this.dialog))};a.share.SocialDialog.prototype.setupSz=function(){if(this.obj.style.display=="none"){return}this.contentSpan.style.top="0px";this.dialog.style.height="";this.contentInt.style.height="";var d=this.getInitialHeight();var f;if(!this.isTouch){f=this.dialog.offsetHeight-this.backOverlay.offsetHeight;if(f>0){this.contentInt.style.height=d+"px";f=this.dialog.offsetHeight-this.backOverlay.offsetHeight;if(d-f>=0){this.contentInt.style.height=(d-f)+"px"}}this.setupScroll()}else{var c=a.Util.getObjPos(this.bottom).y-a.Util.getObjPos(this.contentInt).y;this.contentInt.style.height=c+"px";var e=(this.contentInt.offsetWidth-this.contentSpan.offsetWidth)/2;this.contentSpan.style.left=e+"px"}f=(this.contentInt.offsetHeight-this.contentSpan.offsetHeight)/2;if(f>0){this.contentSpan.style.top=f+"px"}};a.share.SocialDialog.prototype.setupScroll=function(){var d=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(d>0){var c=this.scrollbarInst.curPos_;this.scrollbarInst.setMaxScroll(d);this.scrollbarInst.curPos_=c;this.scrollbarInst.setThumbPosition(false);this.contentSb.style.display="inline-block"}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};a.share.SocialDialog.prototype.createCaption=function(g){this.caption=document.createElement("div");this.caption.id=this.compId+"_header";this.caption.className="s7dialogheader";this.dialog.appendChild(this.caption);this.dialog.setAttribute("aria-labelledby",this.caption.id);var f=document.createElement("span");f.className="s7dialogline";this.caption.appendChild(f);var c=document.createElement("span");c.className="s7dialogheadericon";f.appendChild(c);var e=document.createElement("span");e.className="s7dialogheadertext";e.innerText=this.getLocalizedText("HEADER");f.appendChild(e);this.closebutton=new a.share.DlgActionButton(this.caption.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_HEADER_CLOSE")},"s7closebutton");this.closebutton.obj.ariaLabel=this.getLocalizedText("CLOSE");var d=this;a.Event.addDOMListener(this.closebutton,"click",function(h){d.closebutton.obj.blur();d.onClose(h)},true)};a.share.SocialDialog.prototype.createBottom=function(d){this.bottom=document.createElement("div");this.bottom.className="s7dialogfooter";this.dialog.appendChild(this.bottom);var c=document.createElement("div");this.bottom.appendChild(c);var f=document.createElement("span");f.className="s7dialogbuttoncontainer";f.id=this.compId+"_footerPanel";c.appendChild(f);this.lnc_tnr=c;this.cancelbutton=new a.share.DlgActionButton(f.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_CANCEL")},"s7dialogcancelbutton","span",this.getLocalizedText("CANCEL"));this.bottom.buttonsCtnrId=f.id;var e=this;if(!d){this.actionbutton=new a.share.DlgActionButton(f.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_ACTION")},"s7dialogactionbutton","span",this.getLocalizedText("ACTION"));a.Event.addDOMListener(this.actionbutton,"click",function(g){e.onAction(g)},true)}a.Event.addDOMListener(this.cancelbutton,"click",function(g){e.onCancel(g)},true);if(this.isTouch){this.bottom.style.position="absolute";this.bottom.style.width="100%"}};a.share.SocialDialog.prototype.onAction=function(c){};a.share.SocialDialog.prototype.onCancel=function(c){};a.share.SocialDialog.prototype.createScrollbar=function(){this.contentSb=document.createElement("div");this.contentSb.id=this.id+"_scrollBarContainer";this.contentSb.className="s7dialogscrollpanel";this.contentInt.appendChild(this.contentSb);var c=this;this.scrollbarInst=new a.ScrollBar(this.contentSb.id,this.settings,this.contentSb.id+"_scrollBar");this.scrollbarInst.upButton_.toolTip_.setContent(this.getLocalizedText("TOOLTIP_SCROLL_UP"));this.scrollbarInst.downButton_.toolTip_.setContent(this.getLocalizedText("TOOLTIP_SCROLL_DOWN"));this.scrollbarInst.upButton_.obj.setAttribute("tabindex",-1);this.scrollbarInst.downButton_.obj.setAttribute("tabindex",-1);this.scrollbarInst.addEventListener(a.ScrollEvent.SCROLL_POSITION_EVENT,function(d){c.moveContent(d.s7event.position)},false);if(!this.isTouch){this.contentInt.addEventListener("scroll",function(d){document.getElementById(c.contentSb.id).style.top=c.contentInt.scrollTop+"px";c.scrollbarInst.upButton_.obj.setAttribute("tabindex",-1);c.scrollbarInst.downButton_.obj.setAttribute("tabindex",-1)},false)}if(this.isTouch){this.scrollbarInst.obj.style.display="none"}};a.share.SocialDialog.prototype.moveContent=function(c){this.contentInt.scrollTop=c;if(this.onPositionChanged){this.onPositionChanged()}};a.share.SocialDialog.prototype.createLineFeed=function(){var c=document.createElement("span");c.className="s7dialoglinefeed";this.contentSpan.appendChild(c)};a.share.SocialDialog.prototype.onClose=function(){this.hide()};a.share.SocialDialog.prototype.getFocusableElements=function(){var f=[];function g(h,j,k){var i=h[j];h.splice(j,1);h.splice(k,0,i)}var d=this.dialog.querySelectorAll("[aria-invalid=true],a[href], area[href], input:not([disabled]), select:not([disabled]),[tabindex]:not([notfocusable='true'])");var e=Array.prototype.slice.call(d);for(var c=0;c<e.length;c++){if(e[c].getAttribute("tabindex")!="-1"&&(a.Util.getStyle(e[c],"visibility")!="hidden")&&((a.Util.getStyle(e[c],"display")!="none")&&(a.Util.getStyle(e[c].parentNode,"display")!="none"))){f.push(e[c])}}for(var c=0;c<f.length;c++){if(f[c].getAttribute("aria-invalid")=="true"){g(f,c,0);break}}return f};a.share.SocialDialog.prototype.show=function(){if(this.obj.style.display=="block"){return}this.attachDialog();if(!this.isBody){this.container.style.overflow="visible";this.left=undefined;this.top=undefined}this.obj.style.left=0+"px";this.obj.style.top=0+"px";this.contentSpan.style.top="0px";var c=this;this.resizeTimer=setInterval(function(){if(!c.blockresize){c.onCheckResize()}},100);this.obj.style.visibility="hidden";this.obj.style.display="block";this.setupSz();this.setupScroll();this.centerDialog(true);this.obj.style.visibility="";if(("onorientationchange" in window)&&a.browser.device!=""){window.addEventListener("orientationchange",this.onOrientationChange)}this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];var d=document;this.focusHandler=function(e){if(c.dialogShow&&!c.dialog.contains(e.target)){a.Event.stopPropagation(e);c.firstFocusableElement.focus()}};this.keyHandler=function(e){if(c.dialogShow&&e.keyCode==a.Enum.KEY_CODE.TAB){c.focusableElements=c.getFocusableElements();c.firstFocusableElement=c.focusableElements[0];c.lastFocusableElement=c.focusableElements[c.focusableElements.length-1];if(c.focusableElements.length!=1){if(e.shiftKey){if(document.activeElement===c.firstFocusableElement){a.Event.preventDefault(e);c.lastFocusableElement.focus()}}else{if(document.activeElement===c.lastFocusableElement){a.Event.preventDefault(e);c.firstFocusableElement.focus()}}}}if(c.dialogShow&&e.keyCode==a.Enum.KEY_CODE.ESCAPE){c.hide()}if(c.dialogShow&&e.target.tagName!="INPUT"&&e.target.tagName!="TEXTAREA"&&e.target.tagName!="SELECT"&&e.target.className!="s7combobox"){var f=-1;if(e.keyCode==a.Enum.KEY_CODE.UP){f=c.contentInt.scrollTop-parseInt((c.contentInt.scrollHeight-c.contentInt.clientHeight)/10);if(f<0){f=0}}if(e.keyCode==a.Enum.KEY_CODE.DOWN){f=c.contentInt.scrollTop+parseInt((c.contentInt.scrollHeight-c.contentInt.clientHeight)/10)}if(e.keyCode==a.Enum.KEY_CODE.PAGE_UP){f=c.contentInt.scrollTop-parseInt((c.contentInt.scrollHeight-c.contentInt.clientHeight)/2);if(f<0){f=0}}if(e.keyCode==a.Enum.KEY_CODE.PAGE_DOWN){f=c.contentInt.scrollTop+parseInt((c.contentInt.scrollHeight-c.contentInt.clientHeight)/2)}if(e.keyCode==a.Enum.KEY_CODE.HOME){f=0}if(e.keyCode==a.Enum.KEY_CODE.END){f=c.contentInt.scrollTop+parseInt((c.contentInt.scrollHeight-c.contentInt.clientHeight))}if(f!=-1&&c.scrollbarInst){c.scrollbarInst.setPosition(f);c.scrollbarInst.dispatchEvent(new a.ScrollEvent(a.ScrollEvent.SCROLL_POSITION_EVENT,f,true));a.Event.preventDefault(e)}}};a.Event.addDOMListener(d,"focus",this.focusHandler,true);a.Event.addDOMListener(d,"keydown",this.keyHandler,{passive:false});this.lastFocus=document.activeElement;this.dialog.setAttribute("tabindex",0);this.dialog.setAttribute("aria-hidden","false");this.dialogShow=true;this.firstFocusableElement.focus();c.onCheckResize()};a.share.SocialDialog.prototype.onCheckResizeBody=function(){var i=document.documentElement;var g=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0);var f=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);var d=false;if(this.left!=g||this.top!=f){this.left=g;this.top=f;this.backOverlay.style.left=g+"px";this.backOverlay.style.top=f+"px";d=true}if(this.isTouch){this.screensize=a.browser.detectScreen();this.obj.style.width=this.screensize.w+"px";this.obj.style.height=this.screensize.h+"px"}var c=this.backOverlay.offsetWidth;var e=this.backOverlay.offsetHeight;if(this.wid_!=c||this.hei_!=e){this.attachDialog();this.wid_=c;this.hei_=e;this.setupSz();if(!this.isTouch&&this.scrollbarInst){this.scrollbarInst.resize()}this.centerDialog()}else{if(d){this.centerDialog(true)}}};a.share.SocialDialog.prototype.onCheckResize=function(){if(this.isBody){this.onCheckResizeBody();return}var f=document.documentElement;var e=(window.pageXOffset||f.scrollLeft)-(f.clientLeft||0);var d=(window.pageYOffset||f.scrollTop)-(f.clientTop||0);var c=a.browser.detectScreen();if(this.left!=e||this.top!=d||this.wid_!=c.w||this.hei_!=c.h){this.obj.style.width=(c.w>f.clientWidth?f.clientWidth:c.w)+"px";this.obj.style.height=c.h+"px";this.moveToTopLeft(this.obj);this.attachDialog();this.left=e;this.top=d;this.wid_=c.w;this.hei_=c.h;this.setupSz();if(!this.isTouch&&this.scrollbarInst){this.scrollbarInst.resize()}this.centerDialog()}};a.share.SocialDialog.prototype.hide=function(){if(("onorientationchange" in window)&&a.browser.device!=""){window.removeEventListener("orientationchange",this.onOrientationChange)}var d=document;a.Event.removeDOMListener(d,"focus",this.focusHandler,true);a.Event.removeDOMListener(d,"keydown",this.keyHandler,{passive:false});if(this.resizeTimer){window.clearInterval(this.resizeTimer);var c=new a.event.SocialEvent(a.event.SocialEvent.NOTF_SOCIAL_DEACTIVATED,true);this.parent.dispatchEvent(c)}this.resizeTimer=null;if(!this.isBody){this.container.style.overflow="";this.wid_=-1;this.onCheckResize()}this.obj.style.display="none";this.dialog.setAttribute("tabindex",-1);this.dialog.setAttribute("aria-hidden","true");this.dialogShow=false;this.lastFocus.focus()};a.share.SocialDialog.prototype.dispose=function(){if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function b(){var d=a.Util.css.createCssRuleText;var c=d(".s7dialogcancelbutton",{"width":"64px","height":"34px"})+d(".s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+d(".s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+d(".s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+d(".s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"});a.Util.css.addDefaultCSS(c,"SocialDialog")})()}if(!a.share.LinkDialogControl){a.share.LinkDialogControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.LinkDialogControl.NS,c.constructor,a.share.LinkDialog.RESTRICTED_STYLES])};a.share.LinkDialogControl.prototype.setCSS=function(g,f,e){if(this.component){function d(h){return h.replace(/\./g,"").split(" ")}var c=d(g);if(c[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[g,f,e])}}};a.share.LinkDialogControl.NS="s7sdk.share.LinkDialogControl"}a.Class.inherits(a.share.LinkDialogControl.NS,"s7sdk.ControlComponent");if(!a.share.LinkDialog){a.share.LinkDialog=function LinkDialog(c,g,e,d,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.LinkDialog constructor - containerId: %0, settings: %1 , compId: %2",c,g,e);var h=!!arguments[5];arguments.callee.superclass.apply(this,[c,g,e,"s7linkdialog",d,f,!h]);this.createDialog(a.browser.device.name!="desktop");if(!h){return new a.share.LinkDialogControl(this)}else{return this}};a.Class.inherits("s7sdk.share.LinkDialog","s7sdk.share.SocialDialog");a.share.LinkDialog.prototype.symbols={HEADER:"Share Link",DESCRIPTION:"To share this content with others, copy and past this link:",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};a.share.LinkDialog.prototype.createContent=function(){this.createLinkLable(this.getLocalizedText("DESCRIPTION"));this.createLinkLine();this.createScrollbar()};a.share.LinkDialog.prototype.createLinkLable=function(c){var d=document.createElement("span");d.className="s7dialogline s7dialoglabel s7dialoginputwide";this.contentSpan.appendChild(d);d.innerText=c;this.createLineFeed()};a.share.LinkDialog.prototype.createLinkLine=function(){var c=document.createElement("span");c.className="s7dialogline s7dialoginputcontainer";this.contentSpan.appendChild(c);this.inplnk=document.createElement("input");this.inplnk.className="s7dialoglink";this.inplnk.setAttribute("aria-label",this.getLocalizedText("LINK_URL"));c.appendChild(this.inplnk);this.createLineFeed()};a.share.LinkDialog.prototype.setupScroll=function(){};a.share.LinkDialog.prototype.createScrollbar=function(){};a.share.LinkDialog.prototype.onAction=function(){if(this.inplnk.select){this.inplnk.focus();this.inplnk.select();this.firstFocusableElement=this.inplnk;return}var c,d;if(window.getSelection&&document.createRange){d=window.getSelection();c=document.createRange();c.selectNodeContents(this.inplnk);d.removeAllRanges();d.addRange(c)}else{if(document.selection&&document.body.createTextRange){c=document.body.createTextRange();c.moveToElementText(this.inplnk);c.select()}else{}}};a.share.LinkDialog.prototype.onCancel=function(){try{window.getSelection().removeAllRanges()}catch(c){document.selection.empty()}this.hide()};a.share.LinkDialog.prototype.setContentUrl=function(c){if(c){this.inplnk.value=c}};a.share.LinkDialog.prototype.show=function(){a.share.SocialDialog.prototype.show.call(this);this.dialog.setAttribute("tabindex",-1)};(function b(){var f=a.Util.css.createCssRuleText;var d=a.Util.css.createCssImgUrlText;var c=f(".s7linkdialog .s7dialogheadericon",{"background-image":d("dlglink_cap.png"),"width":"22px","height":"12px"})+f(".s7linkdialog .s7dialogviewarea",{"height":"100px"})+f(".s7linkdialog .s7dialoginputwide",{"border":"none","padding-bottom":"10px","width":"430px"})+f(".s7linkdialog .s7dialoginputcontainer",{"border":"1px solid #cccccc","padding":"9px"})+f(".s7linkdialog .s7dialoglink",{"border":"none","width":"450px"})+f(".s7linkdialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+f(".s7linkdialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+f(".s7linkdialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+f(".s7linkdialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+f(".s7linkdialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+f(".s7linkdialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+f(".s7linkdialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+f(".s7linkdialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+f(".s7linkdialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+f(".s7linkdialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var e=[];a.share.dialogsDefaultCSS("LinkDialog",".s7linkdialog",e,c)})()}if(!a.share.EmailDialogControl){a.share.EmailDialogControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.EmailDialogControl.NS,c.constructor,a.share.EmailDialog.RESTRICTED_STYLES])};a.share.EmailDialogControl.prototype.setCSS=function(g,f,e){if(this.component){function d(h){return h.replace(/\./g,"").split(" ")}var c=d(g);if(c[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[g,f,e])}}};a.share.EmailDialogControl.NS="s7sdk.share.EmailDialogControl"}a.Class.inherits(a.share.EmailDialogControl.NS,"s7sdk.ControlComponent");if(!a.share.EmailDialog){a.share.EmailDialog=function EmailDialog(c,g,e,d,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.EmailDialog_src constructor - containerId: %0, settings: %1 , compId: %2",c,g,e);var h=!!arguments[5];arguments.callee.superclass.apply(this,[c,g,e,"s7emaildialog",d,f,!h]);this.createDialog();if(!h){return new a.share.EmailDialogControl(this)}else{return this}};a.Class.inherits("s7sdk.share.EmailDialog","s7sdk.share.SocialDialog");a.share.EmailDialog.prototype.symbols={HEADER:"Email this to a Friend",INVALID_ADDRESSS:"Wrong email address",TO_EMAIL_ERROR:"To email address is required or it may be invalid",FROM_EMAIL_ERROR:"From email address is required or it may be invalid",TO:"To",TOOLTIP_ADD:"Add",ADD:"Add Another Email Address",PRIMARY_EMAIL_ADDRESS:"Primary Email Address",ADDITIONAL_EMAIL_ADDRESS:"Additional Email Address",FROM:"From",MESSAGE:"Message",TOOLTIP_REMOVE:"Remove",REMOVE:"Remove the email address",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",CLOSE:"Close",TOOLTIP_CLOSE:"Close",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"Send Email",TOOLTIP_ACTION:"Send",SEND_SUCCESS:"Email sent successfully",SEND_FAILURE:"Send email failed"};a.share.EmailDialog.prototype.createContent=function(){a.Util.css.setCSSAttributeSelector(this.contentInt,"state","");this.addrCounter=0;this.createErrorMsg();this.createMailLine("$TOEMAIL$",this.getLocalizedText("TO")+"*","input",false,null,"s7dialoginputshort");this.createAddMailLine();this.createScrollbar();this.createMailLine("$FROMEMAIL$",this.getLocalizedText("FROM")+"*","input",false,null,"s7dialoginputwide");this.msgCtrl=this.createMailLine("$MESSAGEEMAIL$",this.getLocalizedText("MESSAGE"),"textarea",false,null,"s7dialoginputwide");this.createDescrLine();var c=this.contentSpan.querySelector(".s7dialogline .s7dialoginputcontainer .s7dialoginputshort");c.parentElement.setAttribute("data-children-count","1");c.ariaLabel=this.getLocalizedText("PRIMARY_EMAIL_ADDRESS");c.setAttribute("aria-labelledby",c.getAttribute("aria-labelledby")+" "+c.id)};a.share.EmailDialog.prototype.getInitialHeight=function(){var c=this.contentInt.getAttribute("state");return parseInt(a.Util.css.getCss("s7dialogviewarea","height",this.contentInt.id,null,this.dialog,{"state":c}))};a.share.EmailDialog.prototype.createErrorMsg=function(){var d=document.createElement("span");d.id=this.id+"_dialogerror";d.className="s7dialogline s7dialogerror";a.Util.css.setCSSAttributeSelector(d,"error","false");this.contentSpan.appendChild(d);var c=document.createElement("span");c.className="s7dialogerrormessage";d.appendChild(c);d.errsp=c;d.errList=[];this.errLine=d;this.errLine.setAttribute("role","alert");this.errLine.setAttribute("aria-hidden",true);this.setErrorMsg("INVALID_ADDRESSS","verifyerror");this.createLineFeed()};a.share.EmailDialog.prototype.setErrorMsg=function(f,e){var d=this.errLine.errsp;a.Util.css.setCSSAttributeSelector(d,"state",e);var c=this.getLocalizedText(f);d.textContent=c;d.innerText=c};a.share.EmailDialog.prototype.createAddMailLine=function(){var f=document.createElement("span");f.id=this.id+"_lnctnr_"+a.Util.createUniqueId();f.className="s7dialogline";this.contentSpan.appendChild(f);var e=document.createElement("span");e.className="s7dialoglabel s7dialoginputlabel";f.appendChild(e);this.addBtnCtnr=f;var d=new a.share.DlgActionButton(f.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_ADD")},"s7dialogaddemailbutton","span",this.getLocalizedText("ADD"));d.obj.setAttribute("aria-label",this.getLocalizedText("ADD"));var c=this;d.addEventListener("click",function(){c.onAddEmailAddress()},false);this.createLineFeed()};a.share.EmailDialog.prototype.onAddEmailAddress=function(){var d=document.createElement("span");d.className="s7dialoglinefeed";var g=this.createMailLine("$ADDEMAIL"+this.addrCounter+"$",this.getLocalizedText("TO"),"input",true,this.addBtnCtnr,"s7dialoginputshort");this.addrCounter++;var f=this.contentSpan.querySelectorAll(".s7dialogline .s7dialoginputcontainer .s7dialoginputshort").length;var h=g.querySelector(".s7dialoglabel.s7dialoginputlabel");h.style="visibility: hidden";var c=g.querySelector(".s7dialoginputcontainer .s7dialoginputshort");c.parentElement.setAttribute("data-children-count","1");c.ariaLabel=this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+" "+(f-1);c.setAttribute("aria-labelledby",c.getAttribute("aria-labelledby")+" "+c.id);var e=g.querySelector(".s7button.s7dialogremoveemailbutton");e.setAttribute("aria-label",e.getAttribute("aria-label")+" "+c.getAttribute("aria-label"));this.contentSpan.insertBefore(d,this.addBtnCtnr);g.inp.focus();this.setupScroll(true);this.wid_=0};a.share.EmailDialog.prototype.createDescrLine=function(){var g=document.createElement("span");g.className="s7dialogline s7dialogcontent";this.contentSpan.appendChild(g);var f=document.createElement("span");f.className="s7dialogthumbnail";g.appendChild(f);var e=parseInt(a.Util.getStyle(f,"width"));var j=parseInt(a.Util.getStyle(f,"height"));g.imgsp=f;g.imgsp.w=e==0?f.clientWidth:e;g.imgsp.h=j==0?f.scrollHeight:j;var c=document.createElement("span");c.className="s7dialoginfopanel";g.appendChild(c);var i=document.createElement("span");i.className="s7dialogtitle";c.appendChild(i);g.titlestr=i;var d=document.createElement("span");d.className="s7dialogorigin";c.appendChild(d);g.site=d;var h=document.createElement("span");h.className="s7dialogdescription";c.appendChild(h);g.descrtext=h;this.descr=g};a.share.EmailDialog.prototype.createMailLine=function(e,j,k,f,i,l){var h=document.createElement("span");if(f){h.id=this.id+"_lnctnr_"+a.Util.createUniqueId()}h.className="s7dialogline";if(i){this.contentSpan.insertBefore(h,i)}else{this.contentSpan.appendChild(h)}var g=document.createElement("span");g.id=this.id+"_lbl_"+a.Util.createUniqueId();g.className="s7dialoglabel s7dialoginputlabel";g.innerText=j;h.appendChild(g);var d=document.createElement("span");d.className="s7dialoginputcontainer";h.appendChild(d);h.spinp=d;h.inp=document.createElement(k);h.inp.setAttribute("aria-labelledby",g.id);h.inp.id=this.id+"_"+k+"_"+a.Util.createUniqueId();if(k=="textarea"){h.inp.className="s7dialogmessage "+l;h.inp.setAttribute("aria-multiline","true")}else{h.inp.className=l;h.inp.setAttribute("aria-multiline","false");h.inp.setAttribute("aria-required",true);h.inp.setAttribute("aria-invalid",false);var c=this;h.inp.onchange=function(n){var m=c.verifyEmailAddress(h)}}d.appendChild(h.inp);if(f){h.btn=new a.share.DlgActionButton(h.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_REMOVE")},"s7dialogremoveemailbutton");h.btn.obj.setAttribute("aria-label",this.getLocalizedText("TOOLTIP_REMOVE"));if(i){var c=this;a.Event.addDOMListener(h.btn,"click",function(o){var n=-1;c.focusableElements=c.getFocusableElements();for(var m=0;m<c.focusableElements.length;m++){if(c.focusableElements[m]==document.activeElement){n=m;break}}c.onRemove(h);if(n<(c.focusableElements.length-1)){c.focusableElements[n+1].focus()}else{c.firstFocusableElement.focus()}c.focusableElements=c.getFocusableElements();c.firstFocusableElement=c.focusableElements[0];c.lastFocusableElement=c.focusableElements[c.focusableElements.length-1];c.updateEmailInputFieldsAndButtonLabel()},true)}else{h.btn.obj.style.visibility="hidden"}}this.createLineFeed();h.contentIdx=e;return h};a.share.EmailDialog.prototype.updateEmailInputFieldsAndButtonLabel=function(){var c=this.contentSpan.querySelectorAll(".s7dialogline .s7dialoginputcontainer .s7dialoginputshort");for(var e=1;e<c.length;e++){c[e].ariaLabel=this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+e;c[e].parentElement.parentElement.querySelector(".s7button.s7dialogremoveemailbutton").ariaLabel=this.getLocalizedText("TOOLTIP_REMOVE")+" "+this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+" "+e}var d=this.contentSpan.querySelector(".s7dialoglinefeed + .s7dialoglinefeed");if(d){d.remove()}};a.share.EmailDialog.prototype.setDialogData=function(e){var f=this.contentSpan.childNodes;for(var d=0;d<f.length;d++){var c=null;if(f[d].contentIdx){switch(f[d].contentIdx){case"$TOEMAIL$":f[d].inp.value=e.toEmail[0];break;case"$FROMEMAIL$":f[d].inp.value=e.fromEmail;break;case"$MESSAGEEMAIL$":f[d].inp.value=e.comments;break;default:break}}}this.descr.titlestr.innerHTML=e.titleStr;this.descr.imgsp.style.backgroundImage="url('"+e.thumbbnailUrl+"')";this.descr.descrtext.innerHTML=e.descrStr;this.container=null;this.attachDialog()};a.share.EmailDialog.prototype.getDialogData=function(){var f=this.contentSpan.childNodes;var e={"toEmail":[""],"fromEmail":"","comments":""};for(var d=0;d<f.length;d++){var c=null;if(f[d].contentIdx){c=f[d].inp.value;switch(f[d].contentIdx){case"$TOEMAIL$":e.toEmail[0]=c;break;case"$FROMEMAIL$":e.fromEmail=c;break;case"$MESSAGEEMAIL$":e.comments=c;break;default:if(f[d].contentIdx.indexOf("$ADDEMAIL")!=-1){e.toEmail.push(c)}break}}}return e};a.share.EmailDialog.prototype.verifyEmailAddress=function(e){var c=e.inp.value;var d=this.validateEmailStr(c);if(!d){e.inp.setAttribute("aria-invalid",true);e.inp.setAttribute("aria-describedby",this.errLine.id)}else{e.inp.setAttribute("aria-invalid",false);e.inp.removeAttribute("aria-describedby",this.errLine.id)}this.setupErrorMsg(e,!d);this.setupScroll();return d};a.share.EmailDialog.prototype.setupScroll=function(e){var f=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(f>0){if(!this.isTouch){var d=this.scrollbarInst.curPos_;this.scrollbarInst.setMaxScroll(f);var c=e?this.contentInt.offsetHeight-(a.Util.getObjPos(this.addBtnCtnr).y-a.Util.getObjPos(this.contentInt).y)-this.addBtnCtnr.offsetHeight:-d;if(c<0){this.scrollbarInst.curPos_=-c;this.scrollbarInst.setThumbPosition(false)}}this.contentSb.style.display="inline-block"}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};a.share.EmailDialog.prototype.onRemove=function(c){this.setupErrorMsg(c,false);if(c.btn&&c.btn.toolTip_){c.btn.toolTip_.removeToolTip()}this.contentSpan.removeChild(c);this.setupScroll(true);this.wid_=0};a.share.EmailDialog.prototype.validateEmailStr=function(e){var d=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/igm;var c=d.test(e);return c};a.share.EmailDialog.prototype.setupErrorMsg=function(g,h){a.Util.css.setCSSAttributeSelector(g.spinp,"state",h?"verifyerror":"");var e=false;var f;for(f=0;f<this.errLine.errList.length;f++){if(this.errLine.errList[f]==g){e=true;break}}if(h){if(!e){this.errLine.errList.push(g)}}else{if(e){this.errLine.errList.splice(f,1)}}if(this.errLine.errList.length!=0){this.actionbutton.deactivate();this.errLine.setAttribute("aria-hidden",false);var c=false;var d=document.getElementsByClassName("s7dialoginputshort");for(var f=0;f<d.length;f++){if(d[f].getAttribute("aria-invalid")=="true"){c=true}}if(c){this.setErrorMsg("TO_EMAIL_ERROR","verifyerror")}else{this.setErrorMsg("FROM_EMAIL_ERROR","verifyerror")}}else{this.actionbutton.activate();this.errLine.setAttribute("aria-hidden",true)}a.Util.css.setCSSAttributeSelector(this.errLine,"error",this.errLine.errList.length!=0)};a.share.EmailDialog.prototype.onClose=function(c){this.onCancel(c)};a.share.EmailDialog.prototype.onCancel=function(c){if(this.contentInt.getAttribute("state")!=""){a.Util.css.setCSSAttributeSelector(this.errLine,"error","false");this.setErrorMsg("INVALID_ADDRESSS","verifyerror");this.cancelbutton.setText(this.getLocalizedText("CANCEL"));this.cancelbutton.toolTip_.setContent(this.getLocalizedText("TOOLTIP_CANCEL"));a.Util.css.setCSSAttributeSelector(this.contentInt,"state","");this.disableInputs(false);this.showContent(true);this.actionbutton.obj.style.display="";this.actionbutton.activate();this.wid_=this.hei_=0;this.onCheckResize();this.setupScroll()}this.hide()};a.share.EmailDialog.prototype.disableInputs=function(c){var e=this.contentSpan.childNodes;for(var d=0;d<e.length;d++){if(e[d].contentIdx){e[d].inp.disabled=c}}};a.share.EmailDialog.prototype.showContent=function(e){var d=this.contentSpan.childNodes;for(var c=0;c<d.length;c++){if(d[c]!=this.errLine){d[c].style.display=e?"":"none"}}};a.share.EmailDialog.prototype.onAction=function(){var h=this.contentSpan.childNodes;var f={"toEmail":[""],"fromEmail":"","comments":""};for(var d=0;d<h.length;d++){var c=null;if(h[d].contentIdx){c=h[d].inp.value;switch(h[d].contentIdx){case"$TOEMAIL$":f.toEmail[0]=c;break;case"$FROMEMAIL$":f.fromEmail=c;break;case"$MESSAGEEMAIL$":f.comments=c;c=null;break;default:if(h[d].contentIdx.indexOf("$ADDEMAIL")!=-1){f.toEmail.push(c)}else{c=null}break}}if(c!=null){if(!this.validateEmailStr(c)){this.verifyEmailAddress(h[d]);this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];this.firstFocusableElement.focus();return}}}var g="?";g+="toEmail="+f.toEmail.join(",");g+="&fromEmail="+f.fromEmail;g+="&desc="+this.titleStr;g+="&comments="+encodeURIComponent(f.comments);g+="&url="+encodeURIComponent(this.contentUrl);if(this.thumbbnailUrl){g+="&thumb="+encodeURIComponent(this.thumbbnailUrl)}if(this.descrStr){g+="&desc="+this.descrStr}g+="&language="+this.settings.locale;var e=this.emailurl+g;this.isReq_=new a.IS();this.isReq_.getHttpReq(e,this.requestComplete,this.requestError,this);this.disableInputs(true);this.cancelbutton.deactivate();this.actionbutton.deactivate()};a.share.EmailDialog.prototype.requestComplete=function(c,d){d.successSend(c.message)};a.share.EmailDialog.prototype.requestError=function(c,d){d.successSend(c.message)};a.share.EmailDialog.prototype.successSend=function(c){this.showContent(false);this.cancelbutton.setText(this.getLocalizedText("CLOSE"));this.cancelbutton.toolTip_.setContent(this.getLocalizedText("TOOLTIP_CLOSE"));this.cancelbutton.activate();this.actionbutton.obj.style.display="none";a.Util.css.setCSSAttributeSelector(this.contentInt,"state","sendsuccess");if(c==a.IS.STATUS_SUCCESS){this.setErrorMsg("SEND_SUCCESS","sendsuccess")}else{this.setErrorMsg("SEND_FAILURE","senderror")}this.errLine.setAttribute("aria-hidden",false);a.Util.css.setCSSAttributeSelector(this.errLine,"error","true");this.wid_=this.hei_=0;this.onCheckResize();this.setupScroll();this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];this.firstFocusableElement.focus()};a.share.EmailDialog.prototype.setContentUrl=function(c){this.contentUrl=c};a.share.EmailDialog.prototype.setContentTitle=function(c){this.descr.titlestr.innerHTML=c;this.titleStr=c};a.share.EmailDialog.prototype.setOriginUrl=function(c){this.descr.site.innerHTML=c};a.share.EmailDialog.prototype.setThumbnail=function(e){var d=this.descr.imgsp;if(!e){return}var c=a.Util.resolveURL(this.serverUrl,e);c+=(c.indexOf("?")==-1?"?":"&")+"wid="+d.w;c+="&hei="+d.h;d.style.backgroundImage="url('"+c+"')";this.thumbbnailUrl=c};a.share.EmailDialog.prototype.setDescription=function(c){this.descr.descrtext.innerHTML=c;this.descrStr=c};a.share.EmailDialog.prototype.setEmailService=function(c){this.emailurl=c};a.share.EmailDialog.prototype.setServerUrl=function(c){this.serverUrl=a.Util.normalizeUrl(c)};(function b(){var g=a.Util.css.createCssRuleText;var e=a.Util.css.createCssImgUrlText;var c=g(".s7emaildialog .s7dialogheadericon",{"background-image":e("dlgemail_cap.png"),"width":"24px","height":"17px"})+g(".s7emaildialog .s7dialoginputlabel",{"margin-right":"10px","padding":"10px","position":"relative","width":"50px","display":"inline-block","text-align":"right"})+g(".s7emaildialog .s7dialogerrormessage",{"position":"relative","display":"inline-block","background-position":"left center","background-repeat":"no-repeat","font-size":"10pt","font-weight":"bold","vertical-align":"middle","text-align":"center","padding-left":"20px","line-height":"25px"})+g(".s7emaildialog .s7dialogerrormessage[state='verifyerror']",{"background-image":e("dlgerrimg.png"),"color":"#ff0000"})+g(".s7emaildialog .s7dialogerrormessage[state='senderror']",{"background-image":e("dlgerrimg.png"),"color":"#ff0000"})+g(".s7emaildialog .s7dialogerrormessage[state='sendsuccess']",{"background-image":"none","color":"#00b200"})+g(".s7emaildialog .s7dialogbody .s7dialogline ",{"padding":"10px"})+g(".s7emaildialog .s7dialogviewarea",{"height":"300px"})+g(".s7emaildialog .s7dialogviewarea[state='sendsuccess']",{"height":"100px"})+g(".s7emaildialog .s7dialoginputcontainer",{"display":"inline-block","position":"relative","border":"1px solid #cccccc","padding":"9px"})+g(".s7emaildialog .s7dialogerror[error='false']",{"display":"none"})+g(".s7emaildialog .s7dialogerror[error='true']",{"display":"inline-block"})+g(".s7emaildialog .s7dialoginputcontainer[state='verifyerror']",{"border":"1px solid #ff0000"})+g(".s7emaildialog .s7dialoginputshort",{"border":"none","width":"250px"})+g(".s7emaildialog .s7dialoginputwide",{"border":"none","width":"300px"})+g(".s7emaildialog .s7dialogmessage",{"white-space":"pre-wrap","white-space":"-moz-pre-wrap","white-space":"-pre-wrap","white-space":"-o-pre-wrap","word-wrap":"break-word","resize":"none","height":"50px"})+g(".s7emaildialog .s7dialogbody .s7dialogcontent",{"padding":"0","border":"1px dotted #a0a0a0"})+g(".s7emaildialog .s7dialogthumbnail",{"position":"relative","display":"inline-block","background-position":"center center","background-repeat":"no-repeat","width":"90px","height":"60px","padding":"10px","vertical-align":"top"})+g(".s7emaildialog .s7dialoginfopanel",{"position":"relative","width":"300px","display":"inline-block"})+g(".s7emaildialog .s7dialogtitle",{"position":"relative","display":"block","font-weight":"bold","margin":"10px"})+g(".s7emaildialog .s7dialogorigin",{"position":"relative","margin":"10px","display":"block"})+g(".s7emaildialog .s7dialogdescription",{"font-size":"9pt","position":"relative","margin":"10px","display":"block"})+g(".s7emaildialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+g(".s7emaildialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+g(".s7emaildialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+g(".s7emaildialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+g(".s7emaildialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"})+g(".s7emaildialog .s7dialogremoveemailbutton",{"position":"relative","display":"inline-block","width":"25px","height":"25px"})+g(".s7emaildialog .s7dialogaddemailbutton",{"background-repeat":"no-repeat","position":"relative","display":"inline-block","text-align":"right","font-size":"12pt","font-weight":"bold","background-position":"left center","line-height":"25px","padding-left":"30px","height":"25px"})+g(".s7emaildialog .s7dialogaddemailbutton[state='up']",{"color":"#666666"})+g(".s7emaildialog .s7dialogaddemailbutton[state='down']",{"color":"#000000"})+g(".s7emaildialog .s7dialogaddemailbutton[state='over']",{"color":"#000000","text-decoration":"underline"})+g(".s7emaildialog .s7dialogaddemailbutton[state='disabled']",{"color":"#666666"})+g(".s7emaildialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+g(".s7emaildialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+g(".s7emaildialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+g(".s7emaildialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+g(".s7emaildialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"});var d=g(".s7emaildialog .s7scrollbar",{"background-color":"transparent","position":"absolute","top":"8px","bottom":"8px","right":"8px","width":"28px"})+g(".s7emaildialog .s7scrollbar .s7scrolltrack",{"background-color":"rgb(178, 178, 178)"});c=d+c;var f=[];f.push({cssNm:"s7dialogaddemailbutton",skins:["dlgaddplus_up.png","dlgaddplus_over.png","dlgaddplus_over.png","dlgaddplus_up.png"]});f.push({cssNm:"s7dialogremoveemailbutton",skins:["dlgremove_up.png","dlgremove_over.png","dlgremove_over.png","dlgremove_up.png"]});f.push({cssNm:"s7dialogactionbutton",skins:[]});a.share.dialogsDefaultCSS("EmailDialog",".s7emaildialog",f,c)})()}if(!a.share.EmbedDialogControl){a.share.EmbedDialogControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.EmbedDialogControl.NS,c.constructor,a.share.EmbedDialog.RESTRICTED_STYLES])};a.share.EmbedDialogControl.prototype.setCSS=function(g,f,e){if(this.component){function d(h){return h.replace(/\./g,"").split(" ")}var c=d(g);if(c[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[g,f,e])}}};a.share.EmbedDialogControl.NS="s7sdk.share.EmbedDialogControl"}a.Class.inherits(a.share.EmbedDialogControl.NS,"s7sdk.ControlComponent");if(!a.share.EmbedDialog){a.share.EmbedDialog=function EmbedDialog(c,g,e,i,d,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.EmbedDialog constructor - containerId: %0, settings: %1 , compId: %2",c,g,e);this.embedsizes=this.validateEmbedSizes(i);var h=!!arguments[6];arguments.callee.superclass.apply(this,[c,g,e,"s7embeddialog",d,f,!h]);this.createDialog(a.browser.device.name!="desktop");if(!h){return new a.share.EmbedDialogControl(this)}else{return this}};a.Class.inherits("s7sdk.share.EmbedDialog","s7sdk.share.SocialDialog");a.share.EmbedDialog.prototype.symbols={HEADER:"Embed Link",DESCRIPTION:"To share this content with others, copy and past this code:",EMBED_SIZE:"Embed Size",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",CUSTOM_SIZE:"Custom Size",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};a.share.EmbedDialog.prototype.createContent=function(){this.createLinkLable(this.getLocalizedText("DESCRIPTION"));this.createLinkLine();this.createSelectLine();this.createScrollbar();this.createLineFeed();this.addBtnCtnr=this.cBox.obj;var c=this;a.Event.addDOMListener(this.contentInt,"scroll",function(d){c.onNativeScroll()},true)};a.share.EmbedDialog.prototype.onNativeScroll=function(){if(!this.cBox.blockScroll){this.cBox.hideDropDn()}};a.share.EmbedDialog.prototype.createLinkLable=function(c){var d=document.createElement("span");d.className="s7dialogline s7dialoglabel s7dialoginputwide";this.contentSpan.appendChild(d);d.innerText=c;this.createLineFeed()};a.share.EmbedDialog.prototype.createLinkLine=function(){var d=document.createElement("span");d.className="s7dialogline s7dialoginputcontainer";this.contentSpan.appendChild(d);var c=document.createElement("span");c.className="s7dialogmessage";c.setAttribute("role","textbox");c.setAttribute("contenteditable","false");c.setAttribute("tabindex",0);d.appendChild(c);this.inplnk=c;this.createLineFeed()};a.share.EmbedDialog.prototype.updetCboxItems=function(e){if(e){var c=e.split(";");this.cbxSizes=[];var f=0;for(var d=0;d<c.length;d++){var g=c[d].split(",");if(g.length==3){f=d}this.cbxSizes.push(g[0]+"x"+g[1])}this.cbxSizes.push(this.customSizeStr);this.cBox.update(this.cbxSizes,f)}else{this.cBox.update(["320x240","640x480","1280x960",this.customSizeStr],1)}this.embedsizes=e};a.share.EmbedDialog.prototype.createSelectLine=function(){var c=document.createElement("span");c.className="s7dialogline s7dialogembedsizepanel";this.contentSpan.appendChild(c);var f=document.createElement("span");f.className="s7dialoglabel s7dialogembedsizelabel";f.id=this.id+"_lbl_"+a.Util.createUniqueId();f.innerText=this.getLocalizedText("EMBED_SIZE");c.appendChild(f);c.id=this.id+"_selectorContainer";this.cBox=new a.share.CustomComboBox(c.id,this.settings,c.id+"_combobox","span",this,this.cntSpAbsolute,f.id);this.cBox.obj.style.display="inline-block";this.customSizeStr=this.getLocalizedText("CUSTOM_SIZE");if(this.embedsizes){this.updetCboxItems(this.embedsizes)}var e=document.createElement("span");e.className="s7dialogcustomsizepanel";c.appendChild(e);this.widinpsp=this.createSizeInp(e,"s7dialogcustomsize");this.widinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_WIDTH"));var d=this;a.Event.addDOMListener(this.widinpsp.szinp,"change",function(g){d.onInpChanged(d.widinpsp.szinp)},true);c.onExpand=function(){d.onExpand()};this.heiinpsp=this.createSizeInp(e,"s7dialogcustomsize");this.heiinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_HEIGHT"));a.Event.addDOMListener(this.heiinpsp.szinp,"change",function(g){d.onInpChanged(d.heiinpsp.szinp)},true);this.createLineFeed()};a.share.EmbedDialog.prototype.onInpChanged=function(c){var d=this.widinpsp.szinp.value+"x"+this.heiinpsp.szinp.value;this.updateTemplateText(d)};a.share.EmbedDialog.prototype.createSizeInp=function(g,e){var h=document.createElement("span");h.className=e;g.appendChild(h);var f=document.createElement("span");f.className="s7comboboxtext";f.style.width="0px";f.style.verticalAlign="middle";h.appendChild(f);var d=document.createElement("span");d.className="s7dialogcustomsizeinput";h.appendChild(d);var c=document.createElement("input");c.className="s7dialogcustomsizeinput";h.appendChild(d);d.appendChild(c);h.style.display="none";h.szinp=c;return h};a.share.EmbedDialog.prototype.updateForShow=function(c){var e=this.cbxSizes.length-1;for(var d=0;d<this.cbxSizes.length;d++){if(c==this.cbxSizes[d]){e=d;break}}this.cBox.selectByIdx(e)};a.share.EmbedDialog.prototype.updateTemplate=function(d){this.newSize=d;if(d==this.customSizeStr){this.cBox.changeState(a.share.CustomComboBox.ShRINKED);if(this.widinpsp&&this.widinpsp.szinp){this.widinpsp.style.display="inline-block";this.heiinpsp.style.display="inline-block";var c=this.curSize.toLowerCase().split("x");this.widinpsp.szinp.value=c[0];this.heiinpsp.szinp.value=c[1];this.widinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_WIDTH"));this.heiinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_HEIGHT"))}}else{if(this.widinpsp&&this.widinpsp.szinp){this.widinpsp.style.display="none";this.heiinpsp.style.display="none"}this.cBox.changeState(a.share.CustomComboBox.EXPANDED);this.updateTemplateText(d)}};a.share.EmbedDialog.prototype.onPositionChanged=function(){if(!this.cBox.blockScroll){this.cBox.hideDropDn()}};a.share.EmbedDialog.prototype.updateTemplateText=function(d){this.curSize=d;var c=d.toLowerCase().split("x");if(this.template){var e=this.template.replace("$EMBED_WIDTH$",c[0]).replace("$EMBED_HEIGHT$",c[1]);this.inplnk.innerHTML=e;this.setupSz()}};a.share.EmbedDialog.prototype.onExpand=function(){this.setupScroll(true)};a.share.EmbedDialog.prototype.setupScroll=function(e){var f=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(f>0){if(!this.isTouch){var d=this.scrollbarInst.curPos_;this.contentSb.style.display="inline-block";this.scrollbarInst.setMaxScroll(f);var c=e?this.contentInt.offsetHeight-(a.Util.getObjPos(this.addBtnCtnr).y-a.Util.getObjPos(this.contentInt).y)-this.addBtnCtnr.offsetHeight:-d;if(c<0){this.scrollbarInst.curPos_=-c;this.scrollbarInst.setThumbPosition(false)}}}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};a.share.EmbedDialog.prototype.show=function(){a.share.SocialDialog.prototype.show.apply(this,[]);this.scrollbarInst.curPos_=0;this.scrollbarInst.setThumbPosition(true)};a.share.EmbedDialog.prototype.hide=function(){this.cBox.hideDropDn();a.share.SocialDialog.prototype.hide.apply(this,[])};a.share.EmbedDialog.prototype.onCancel=function(){try{window.getSelection().removeAllRanges()}catch(c){document.selection.empty()}this.hide()};a.share.EmbedDialog.prototype.onAction=function(){this.firstFocusableElement=this.inplnk;this.inplnk.focus();var c,d;if(window.getSelection&&document.createRange){d=window.getSelection();c=document.createRange();c.selectNodeContents(this.inplnk);d.removeAllRanges();d.addRange(c)}else{if(document.selection&&document.body.createTextRange){c=document.body.createTextRange();c.moveToElementText(this.inplnk);c.select()}else{}}};a.share.EmbedDialog.prototype.onClose=function(){a.share.SocialDialog.prototype.onClose.apply(this,[])};a.share.EmbedDialog.prototype.setEmbedCode=function(d){if(!d){return}var c=d;c=c.replace(/&/g,"&amp;");c=c.replace(/</g,"&lt;");c=c.replace(/>/g,"&gt;");c=c.replace(/\n/g,"<br>");this.template=c;if(this.curSize){this.updateForShow(this.curSize)}};a.share.EmbedDialog.prototype.getDialogData=function(c){var c={};c.newSize=this.newSize;c.curSize=this.curSize;return c};a.share.EmbedDialog.prototype.setDialogData=function(c){this.embedsizes=this.validateEmbedSizes(c.embedsizes);this.template=c.template;this.updetCboxItems(this.embedsizes);this.curSize=c.curSize;this.setEmbedCode(this.template);this.updateTemplate(c.newSize);this.updateTemplateText(this.curSize);this.container=null;this.attachDialog()};a.share.EmbedDialog.prototype.validateEmbedSizes=function(c){return/^(true|false|[0-9,;])*$/gi.test(c)?c:a.share.EmbedShare.DEFAULT_EMBED_SIZES};(function b(){var i=a.Util.css.createCssRuleText;var e=a.Util.css.createCssImgUrlText;var c=i(".s7embeddialog .s7dialogheadericon",{"background-image":e("dlgembed_cap.png"),"width":"24px","height":"14px"})+i(".s7embeddialog .s7dialogviewarea",{"height":"300px"})+i(".s7embeddialog .s7dialoginputwide",{"border":"none","padding-bottom":"10px","width":"430px"})+i(".s7embeddialog .s7dialoginputcontainer",{"padding":"10px","width":"430px","font-size":"10pt","word-wrap":"break-word","border":"1px solid #cccccc"})+i(".s7embeddialog .s7dialogmessage",{"-moz-user-select":"text","-khtml-user-select":"text","-webkit-user-select":"text","-o-user-select":"text","white-space":"pre-wrap","white-space":"-moz-pre-wrap","white-space":"-pre-wrap","white-space":"-o-pre-wrap","word-wrap":"break-word","user-select":"text","border":"none","resize":"none","height":"50px"})+i(".s7embeddialog .s7dialogembedsizepanel",{"font-size":"10pt","padding":"10px","border":"none"})+i(".s7embeddialog .s7dialogembedsizelabel",{"vertical-align":"top","display":"inline-block","width":"80px"})+i(".s7embeddialog .s7dialogcustomsizepanel",{"position":"relative","display":"inline-block","left":"20px","vertical-align":"top"})+i(".s7embeddialog .s7comboboxtext",{"position":"relative","display":"inline-block","height":"40px"})+i(".s7embeddialog .s7comboboxdropdown",{"font-size":"10pt","border":"1px solid #cccccc"})+i(".s7embeddialog .s7dialogcustomsize",{"position":"relative","display":"inline-block","border":"1px solid #cccccc","padding-left":"2px","padding-right":"2px","margin-right":"20px","width":"70px"})+i(".s7embeddialog .s7dialogcustomsizeinput",{"border":"none","display":"inline-block","vertical-align":"middle","width":"100%"})+i(".s7embeddialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+i(".s7embeddialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+i(".s7embeddialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+i(".s7embeddialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+i(".s7embeddialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+i(".s7embeddialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+i(".s7embeddialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+i(".s7embeddialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+i(".s7embeddialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+i(".s7embeddialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var d=i(".s7embeddialog .s7scrollbar",{"background-color":"transparent","position":"absolute","top":"8px","bottom":"8px","right":"8px","width":"28px"})+i(".s7embeddialog .s7scrollbar .s7scrolltrack",{"background-color":"rgb(178, 178, 178)"});c=d+c;var h=a.share.comboBoxDDDefaultCSS(".s7embeddialog");var g=a.share.comboBoxDefaultCSS(".s7embeddialog");c=h+c+g;var f=[];f.push({cssNm:"s7dialogactionbutton",skins:[]});a.share.dialogsDefaultCSS("EmbedDialog",".s7embeddialog",f,c)})()}if(!a.share.PrintControl){a.share.PrintControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.PrintControl.NS,c.constructor,a.share.Print.RESTRICTED_STYLES])};a.share.PrintControl.NS="s7sdk.share.PrintControl";a.Class.inherits(a.share.PrintControl.NS,"s7sdk.ControlComponent")}if(!a.share.Print){a.share.Print=function Print(c,e,d){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.Print constructor - container: %0, settings: %1 , compId: %2",c,e,d);arguments.callee.superclass.apply(this,[d,c,null,0,0,"s7print",e]);var g=!!arguments[3];this.serverUrl=a.Util.normalizeUrl(this.serverUrl);var f=this;this.onclickHandler=function(){f.btnClick()};a.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!g){this.printdialog=new a.share.PrintDialog(this.id,this.settings,this.id+"_dialog",a.share.getDialogSymbols(this),this);this.printdialog.setServerUrl(this.serverUrl);this.printdialog.setPrintquality(this.printquality);return new a.share.PrintControl(this)}else{return this}};a.Class.inherits("s7sdk.share.Print","s7sdk.common.Button");a.share.Print.prototype.symbols={TOOLTIP:"Prepare to print",HEADER:"Prepare to print",TOOLTIP_HEADER_CLOSE:"Close",PRINT_RANGE:"Select Print Pages",PRINT_RANGE_CURRENT:"Current pages",PRINT_RANGE_FROM:"Spread range from:",PRINT_RANGE_TO:"to:",PRINT_RANGE_ALL:"All pages",PAGE_HANDLING:"Page Handling",PAGE_HANDLING_ONE:"1 page per sheet",PAGE_HANDLING_TWO:"2 pages per sheet",ACTION:"Send to Print",TOOLTIP_ACTION:"Send to Print",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};a.share.Print.prototype.modifiers={printquality:{params:["wid"],defaults:[1000],ranges:["1:"]},serverUrl:{params:["isRootPath"],defaults:["/is/image/"]}};a.share.Print.RESTRICTED_STYLES={"s7print":["width","height"]};a.share.Print.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(a.share.Print.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[e,d,c])}};a.share.Print.prototype.btnClick=function(){this.printdialog.show()};a.share.Print.prototype.addEventListener=function(e,d,c){a.Logger.log(a.Logger.FINE,"s7sdk.share.Print.addEventListener - type: %0, handler: %1, useCapture: %2",e,d.toString().substring(0,d.toString().indexOf("(")),c);this.superproto.addEventListener.apply(this,[e,d,c])};a.share.Print.prototype.setCurrentFrameIndex=function(c){this.currentFrameIndex=c;this.printdialog.setCurrentFrameIndex(c)};a.share.Print.prototype.setMediaSet=function(d){var c=d;if(!(d instanceof a.OrientationSetDesc)){c=new a.OrientationSetDesc(c,null)}if(c.landscape==null||typeof(c.landscape.items[0])=="undefined"){return}this.printdialog.setMediaSet(c.landscape)};a.share.Print.prototype.cleanUp=function(){a.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.printdialog){this.printdialog.dispose()}this.superproto.cleanUp.apply(this)};a.share.Print.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function b(){a.share.buttonsDefaultCSS("Print",".s7print",["print_up.png","print_over.png","print_down.png","print_disabled.png"])})()}if(!a.share.PrintDialogControl){a.share.PrintDialogControl=function(c){arguments.callee.superclass.apply(this,[c,a.share.PrintDialogControl.NS,c.constructor,a.share.PrintDialog.RESTRICTED_STYLES])};a.share.PrintDialogControl.prototype.setCSS=function(g,f,e){if(this.component){function d(h){return h.replace(/\./g,"").split(" ")}var c=d(g);if(c[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[g,f,e])}}};a.share.PrintDialogControl.NS="s7sdk.share.PrintDialogControl";a.Class.inherits(a.share.PrintDialogControl.NS,"s7sdk.ControlComponent")}if(!a.share.PrintDialog){a.share.PrintDialog=function PrintDialog(c,g,e,d,f){a.Logger.log(a.Logger.CONFIG,"s7sdk.share.PrintDialog constructor - containerId: %0, settings: %1 , compId: %2",c,g,e);var h=!!arguments[5];arguments.callee.superclass.apply(this,[c,g,e,"s7printdialog",d,f,!h]);this.createDialog(a.browser.device.name!="desktop");if(!h){return new a.share.PrintDialogControl(this)}else{return this}};a.Class.inherits("s7sdk.share.PrintDialog","s7sdk.share.SocialDialog");a.share.PrintDialog.prototype.symbols={HEADER:"",PRINT_RANGE:"",PRINT_RANGE_CURRENT:"",PRINT_RANGE_FROM:"",PRINT_RANGE_TO:"",PRINT_RANGE_ALL:"",PAGE_HANDLING:"",PAGE_HANDLING_ONE:"",PAGE_HANDLING_TWO:"",ACTION:"",TOOLTIP_ACTION:"",CANCEL:"",TOOLTIP_CANCEL:""};a.share.PrintDialog.prototype.setupScroll=function(){this.isTouch=false};a.share.PrintDialog.prototype.createContent=function(){this.popupparams={};this.popupparams.inputs=[];var d=this.popupparams.inputs;var e=this;this.popupparams.validate=function(k){for(var j=0;j<d.length;j++){var h=d[j];var l=k.target.groupId?k.target:k.currentTarget;if(h.groupId==l.groupId){h.inp.checked=h==l;if(h.inp.checked){h.inp.setAttribute("tabindex","0");h.inp.setAttribute("aria-checked","true")}else{h.inp.setAttribute("tabindex","-1");h.inp.setAttribute("aria-checked","false")}}}e.focusableElements=e.getFocusableElements();e.firstFocusableElement=e.focusableElements[0];e.lastFocusableElement=e.focusableElements[e.focusableElements.length-1]};var c=this.createPrintLable(this.getLocalizedText("PRINT_RANGE"));this.radioGroup1=document.createElement("fieldset");this.radioGroup1.className="s7radiogroup";this.radioGroup1.setAttribute("tabindex","-1");this.radioGroup1.setAttribute("role","radiogroup");this.radioGroup1.setAttribute("aria-labelledby",c.id);var f=this.createOneLine(1,this.getLocalizedText("PRINT_RANGE_FROM"),"mode");this.createNumberCtrl(f,this.getLocalizedText("PRINT_RANGE_FROM"),this.getLocalizedText("PRINT_RANGE_TO"));this.radioGroup1.appendChild(this.createOneLine(0,this.getLocalizedText("PRINT_RANGE_CURRENT"),"mode"));this.radioGroup1.appendChild(f);this.radioGroup1.appendChild(this.createOneLine(2,this.getLocalizedText("PRINT_RANGE_ALL"),"mode"));this.contentSpan.appendChild(this.radioGroup1);this.setSelected("mode",0);var g=this.createPrintLable(this.getLocalizedText("PAGE_HANDLING"),true);this.radioGroup2=document.createElement("fieldset");this.radioGroup2.className="s7radiogroup";this.radioGroup2.setAttribute("tabindex","-1");this.radioGroup2.setAttribute("role","radiogroup");this.radioGroup2.setAttribute("aria-labelledby",g.id);this.radioGroup2.appendChild(this.createOneLine(0,this.getLocalizedText("PAGE_HANDLING_ONE"),"layout"));this.radioGroup2.appendChild(this.createOneLine(1,this.getLocalizedText("PAGE_HANDLING_TWO"),"layout"));this.contentSpan.appendChild(this.radioGroup2);this.setSelected("layout",1)};a.share.PrintDialog.prototype.setSelected=function(f,c){for(var e=0;e<this.popupparams.inputs.length;e++){var d=this.popupparams.inputs[e];if(d.groupId==f){d.inp.checked=d.inp.value==c;if(d.inp.checked){d.inp.setAttribute("tabindex","0");d.inp.setAttribute("aria-checked","true")}else{d.inp.setAttribute("tabindex","-1");d.inp.setAttribute("aria-checked","false")}}}this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1]};a.share.PrintDialog.prototype.getSelected=function(e){for(var d=0;d<this.popupparams.inputs.length;d++){var c=this.popupparams.inputs[d];if((c.groupId==e)&&c.inp.checked){return parseInt(c.inp.value)}}return 0};a.share.PrintDialog.prototype.createPrintLable=function(c,e){var d=document.createElement("span");d.id=a.Util.createUniqueId();d.className="s7dialogline s7dialoglabel"+(e?" s7horizontaldivider":" s7dialoginputwide");this.contentSpan.appendChild(d);d.innerText=c;this.createLineFeed();return d};a.share.PrintDialog.prototype.createNumberCtrl=function(h,f,c){var e=document.createElement("input");e.setAttribute("type","number");e.setAttribute("role","textbox");e.setAttribute("aria-multiline",false);e.setAttribute("aria-label",f);e.className="s7dialogrange";e.value=1;e.setAttribute("min",1);e.setAttribute("max",1);h.appendChild(e);this.popupparams.startPg=e;var g=document.createElement("span");g.innerText=c;h.appendChild(g);var d=document.createElement("input");d.setAttribute("type","number");d.setAttribute("role","textbox");d.setAttribute("aria-multiline",false);d.setAttribute("aria-label",c);d.className="s7dialogrange";d.value=1;d.setAttribute("min",1);d.setAttribute("max",1);h.appendChild(d);this.popupparams.endPg=d;this.popupparams.startPg.onchange=function(i){d.setAttribute("min",e.value)};this.popupparams.endPg.onchange=function(i){e.setAttribute("max",d.value)}};a.share.PrintDialog.prototype.createOneLine=function(d,c,g){var e=document.createElement("div");e.className="s7dialoginputcontainer";var i=document.createElement("div");i.groupId=g;i.className="s7dialogoption";var f=this.popupparams;i.onclick=function(k){f.validate(k)};var h=document.createElement("input");h.setAttribute("type","radio");h.setAttribute("role","radio");h.setAttribute("aria-label",c);h.setAttribute("tabindex","-1");h.value=d;h.name=g;i.inp=h;i.appendChild(h);var j=document.createElement("span");j.innerText=c;i.appendChild(j);this.popupparams.inputs.push(i);e.appendChild(i);this.contentSpan.appendChild(e);this.createLineFeed();return e};a.share.PrintDialog.prototype.setMediaSet=function(d){this.items=d.items;var c=d.name;var e=c.split("/");c=e.length==1?c:e[1];this.title=c;this.min=1;this.max=this.items.length;this.popupparams.startPg.setAttribute("min",this.min);this.popupparams.startPg.setAttribute("max",this.max);this.popupparams.startPg.value=this.min;this.popupparams.endPg.setAttribute("min",this.min);this.popupparams.endPg.setAttribute("max",this.max);this.popupparams.endPg.value=this.max};a.share.PrintDialog.prototype.setPrintquality=function(c){this.printquality=c};a.share.PrintDialog.prototype.setServerUrl=function(c){this.serverUrl=a.Util.normalizeUrl(c)};a.share.PrintDialog.prototype.setCurrentFrameIndex=function(c){this.currentFrameIndex=c};a.share.PrintDialog.prototype.onCancel=function(){this.hide()};a.share.PrintDialog.prototype.pageUrl=function(f,e){var c=a.Util.resolveURL(this.serverUrl,f.name);c+=(c.indexOf("?")>=0?"&":"?");var d=e?f.width/2:f.width;c+="wid="+(d<this.printquality?d:this.printquality+"&hei="+this.printquality+"&fit=fit,1");return c};a.share.PrintDialog.prototype.prepareOnePage=function(c,e){if(e.np){url=this.pageUrl(e,false)}else{var g=this.getSelected("layout");if(g==0){if(e instanceof a.ImageDesc){var f=e.name.split("?")[0].split("/")[0];var h=Math.round(e.width/2);url=a.Util.resolveURL(this.serverUrl,f)+"?src=is("+e.name+(e.name.indexOf("?")==-1?"?":"&")+"rgn=0,0,"+h+","+e.height+")";url+="wid="+(h<this.printquality?h:this.printquality+"&hei="+this.printquality+"&fit=fit,1");c.push(url);url=a.Util.resolveURL(this.serverUrl,f)+"?src=is("+e.name+(e.name.indexOf("?")==-1?"?":"&")+"rgn="+h+",0,"+h+","+e.height+")";url+="wid="+(h<this.printquality?h:this.printquality+"&hei="+this.printquality+"&fit=fit,1")}else{var d=e.images[0];url=this.pageUrl(d,true);c.push(url);d=e.images[1];url=this.pageUrl(d,true)}}else{url=this.pageUrl(e,false)}}c.push(url)};a.share.PrintDialog.prototype.onAction=function(){var d=[];var e=this.items;var j;var h;var g=this.getSelected("mode");switch(g){case 2:j=true;case 1:var k=j?0:parseInt(this.popupparams.startPg.value)-1;var c=j?e.length:parseInt(this.popupparams.endPg.value);for(var f=k;f<c;f++){var h=e[f];this.prepareOnePage(d,h)}break;default:h=e[this.currentFrameIndex];this.prepareOnePage(d,h);break}this.executePrint(d)};a.share.PrintDialog.prototype.executePrint=function(c){var f="<style type='text/css'>";f+="html,body{height:100%;margin:0;padding:0;}div{height:90%;}img{max-height: 100%;max-width: 100%;}";f+="</style>";var g="<html><head><title>"+this.title+"</title>"+f+"</head><body ></body></html>";var e=document.createElement("iframe");e.width="1";e.height="1";e.style.position="absolute";e.style.left="0px";e.style.top="0px";e.src="about:blank";var d=this;e.onload=function(){var m=e.contentWindow.document.createElement("script");m.type="text/javascript";var k="var imgs = [];  \n";k+="function checkReady(){ \n"+"for(var i=0;i<imgs.length;i++) {\n"+"if(!imgs[i].isready){ \n"+"return false;\n"+"}\n "+"} \n"+"return true; \n"+"};\n";k+="function Print(){ \n"+"var img;\n"+"var div;\n";for(var l=0;l<c.length;l++){k+='div = document.createElement("div");\n';if(l!=c.length-1){k+='div.style.pageBreakAfter="always";\n'}k+='img = document.createElement("img");\n';k+="div.appendChild(img);\n"+'img.id="s7im_'+l+'";\n '+'img.src="'+c[l]+'";\n '+"img.onload = function(e){\n "+"e.target.isready = true;"+"if(checkReady()) { \n"+"window.focus(); \n"+"window.print();\n"+"window.document.body.isTestPrinting = false; \n"+"} \n"+"};\n"+"imgs.push(img);"+"window.document.body.appendChild(div);\n"}k+="}";var i=e.contentWindow.document.createTextNode(k);m.appendChild(i);e.contentWindow.document.body.innerHTML=g;e.contentWindow.document.body.appendChild(m);e.contentWindow.document.body.isTestPrinting=true;function h(j){if(j.newIframe.contentWindow.document.body.isTestPrinting){setTimeout(function(){h(j)},200);return}j.newIframe.contentWindow.document.body.removeChild(j.script_tag);j.newIframe.parentElement.removeChild(j.newIframe);d.hide()}setTimeout(function(){e.contentWindow.Print();var j={};j.newIframe=e;j.script_tag=m;h(j)},200)};document.body.appendChild(e)};(function b(){var f=a.Util.css.createCssRuleText;var d=a.Util.css.createCssImgUrlText;var c=f(".s7printdialog .s7dialogheadericon",{"background-image":d("dlgprint_cap.png"),"width":"22px","height":"22px"})+f(".s7printdialog .s7dialogviewarea",{"height":"auto"})+f(".s7printdialog .s7radiogroup",{"border":"none"})+f(".s7printdialog .s7dialogoption input",{"margin-right":"10px"})+f(".s7printdialog .s7dialogoption",{"text-decoration":"none","position":"relative","display":"inline-block","color":"#000000","width":"150px"})+f(".s7printdialog .s7dialoginputwide",{"cursor":"default","border":"none","padding-bottom":"10px","width":"430px"})+f(".s7printdialog .s7horizontaldivider",{"cursor":"default","padding-bottom":"10px","width":"430px","margin-top":"10px","padding-top":"10px","border-top":"1px solid #aaaaaa"})+f(".s7printdialog .s7dialoginputcontainer",{"padding-left":"30px"})+f(".s7printdialog .s7dialogrange",{"display":"inline-block","width":"42px","margin-left":"10px","margin-right":"10px"})+f(".s7printdialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+f(".s7printdialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+f(".s7printdialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+f(".s7printdialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+f(".s7printdialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+f(".s7printdialog .s7dialogactionbutton",{"width":"96px","height":"34px"})+f(".s7printdialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+f(".s7printdialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+f(".s7printdialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+f(".s7printdialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var e=[];a.share.dialogsDefaultCSS("PrintDialog",".s7printdialog",e,c)})()}})(s7getCurrentNameSpace());